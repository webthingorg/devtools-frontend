{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d5ce6a80_95b7c8dc",
        "filename": "front_end/panels/application/ApplicationPanelSidebar.ts",
        "patchSetId": 1
      },
      "lineNbr": 436,
      "author": {
        "id": 1396454
      },
      "writtenOn": "2021-04-28T11:55:37Z",
      "side": 0,
      "message": "My understanding is that `ApplicationPanelSidebar._initialize()` can be called multiple times, which in turn each time then calls other `_initialize()` methods. It is not obvious to me why `indexedDBListTreeElement._initialize()` needs to be prevented from being called multiple times.\nWould just moving the `addModelListener()` in `IndexedDBTreeElement.initialize()` calls into its constructor be an option as well?",
      "revId": "56e1e43c887dbb2869ce52d9b99f71774740c249",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5517d61_b2d20638",
        "filename": "front_end/panels/application/ApplicationPanelSidebar.ts",
        "patchSetId": 1
      },
      "lineNbr": 436,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-04-28T12:02:19Z",
      "side": 0,
      "message": "Your observation is correct, it doesn\u0027t need to be prevented. However, it also doesn\u0027t need to be initialized anymore (see my change below): By calling IndexedDBTreeElement.initialize in IndexedDBTreeElement\u0027s constructor, the initialization will be done up-front, and doesn\u0027t need to be repeated. Note that IndexedDBTreeElement sets up model listeners (i.e. it is listening to all models in all targets) in the constructor now, so it shouldn\u0027t miss anything.\n\nOr are you worried that we need to initialize IndexedDBTreeElement to re-set _idbDatabaseTreeElements ?",
      "parentUuid": "d5ce6a80_95b7c8dc",
      "revId": "56e1e43c887dbb2869ce52d9b99f71774740c249",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97efc117_c2f7ecff",
        "filename": "front_end/panels/application/ApplicationPanelSidebar.ts",
        "patchSetId": 1
      },
      "lineNbr": 436,
      "author": {
        "id": 1396454
      },
      "writtenOn": "2021-04-28T12:35:21Z",
      "side": 0,
      "message": "Correct, I meant the resetting and refilling of `_idbDatabaseTreeElements`. It\u0027s not that I know that this needs to happen again, I was just questioning whether not resetting/refilling it could potentially break something.",
      "parentUuid": "c5517d61_b2d20638",
      "revId": "56e1e43c887dbb2869ce52d9b99f71774740c249",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b8a9b6a_04e0ff59",
        "filename": "front_end/panels/application/ApplicationPanelSidebar.ts",
        "patchSetId": 1
      },
      "lineNbr": 436,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-04-30T08:11:47Z",
      "side": 0,
      "message": "I\u0027ve looked into the IndexedDBModel and I *think* that model will issue add/remove events correctly (i.e. it is not the case that upon navigation, some DBs that were added are not also removed). This means that we shoudn\u0027t need to clear at this point, because the normal update logic will handle things correctly.\n\nIt also means that it isn\u0027t important at which point in time IndexedDBTreeElement.initialize is called: As long as we setup the listeners and at the same time sync state (L1066) we should be good.\n\nDo you agree with my reasoning? Please also double-check that you agree with my assessment that IndexedDBModel send the add/remove events as I described above.",
      "parentUuid": "97efc117_c2f7ecff",
      "revId": "56e1e43c887dbb2869ce52d9b99f71774740c249",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}