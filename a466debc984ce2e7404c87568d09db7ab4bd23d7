{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "951d9eb6_c43cf7dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2023-11-14T08:22:08Z",
      "side": 1,
      "message": "Hi DevTools folks, \n\nPlease help fixing GN dependencies for typescript actions. \nThey are problematic when doing remote execution.\n\nThanks,\nJunji",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dac855db_ed19960d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1323977
      },
      "writtenOn": "2023-11-14T09:34:19Z",
      "side": 1,
      "message": "Hey, could we solve this on the \"devtools_pre_gen\" level? It looks like that rule is not declaring it\u0027s outputs correctly (or the \"entrypoint\" rule is not handling it\u0027s deps correctly).\n\nI\u0027m a bit hesitant to land this as-is since it\u0027ll be very easy to break again if any `devtools_entrypoint` rule will use another `devtools_pre_built` as it\u0027s deps without forwarding the outputs manually.",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ff7089d_a4b6224e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-11-14T10:19:41Z",
      "side": 1,
      "message": "I\u0027m okay with landing as is, but if there\u0027s a way to bake this into devtools_pre_built that would certainly be more safe. Maybe devtools_pre_built isn\u0027t forwarding its outputs correctly?",
      "parentUuid": "dac855db_ed19960d",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0c74320_ed1bdd6d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-11-14T11:41:10Z",
      "side": 1,
      "message": "Having looked at this a little bit more I\u0027d actually prefer a different solution, too. If I\u0027m reading the gn docs[0] right, they\u0027re recommending listing the files as `outputs` in addition to `data`. Would that work here?\n\nhttps://gn.googlesource.com/gn/+/main/docs/reference.md#var_data",
      "parentUuid": "5ff7089d_a4b6224e",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e3826b7_9b9c33c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2023-11-14T13:26:30Z",
      "side": 1,
      "message": "Thank you for the advice!\nSetting the previous outputs to `outputs` isn\u0027t allowed. \n(`group` can\u0027t set outputs, so I changed it to dummy `action`.)\n\n```\n‚ùØ gn gen out/linux-rel\nERROR at //build/config/BUILDCONFIG.gn:680:5: Duplicate output file.\n    action(\"${target_name}\") {\n    ^-------------------------\nTwo or more targets generate the same output:\n  gen/third_party/devtools-frontend/src/extension-api/ExtensionAPI.d.ts\n\nThis is can often be fixed by changing one of the target names, or by\nsetting an output_name on one of them.\n\nCollisions:\n  //third_party/devtools-frontend/src/extension-api:extension-api(//build/toolchain/linux:clang_x64)\n  //third_party/devtools-frontend/src/extension-api:extension-api-copy-gen-javascript(//build/toolchain/linux:clang_x64)\n\nSee //build/config/BUILDCONFIG.gn:680:5: Collision.\n    action(\"${target_name}\") {\n    ^-------------------------\n```\n\nI feel like the `group` in `devtools_pre_built` is redundant, which seems preventing to propagate the outputs to the dependents.\nI unified `copy_to_gen` and `group` to a single `node_action`, instead.\n\nI also need to fix `devtools_module` template. (and maybe others)\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/scripts/build/ninja/devtools_module.gni;l\u003d9;drc\u003d58df6650e172200254512b0bfb353c3a43d5dee7\n\nWDYT?",
      "parentUuid": "e0c74320_ed1bdd6d",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0518f96b_cf167d1f",
        "filename": "front_end/core/platform/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-11-14T10:17:00Z",
      "side": 1,
      "message": "Is this one necessary?",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "250ab1db_f33ab4e8",
        "filename": "front_end/core/platform/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2023-11-14T13:26:30Z",
      "side": 1,
      "message": "Yes, `devtools_module` also has a similar issue not to propagate outputs.",
      "parentUuid": "0518f96b_cf167d1f",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7704a21e_14c77b4d",
        "filename": "front_end/core/platform/BUILD.gn",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2023-11-14T13:26:30Z",
      "side": 1,
      "message": "Yes",
      "parentUuid": "0518f96b_cf167d1f",
      "revId": "a466debc984ce2e7404c87568d09db7ab4bd23d7",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}