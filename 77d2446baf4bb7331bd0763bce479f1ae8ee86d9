{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "26a99256_ec03ca06",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-17T14:50:09Z",
      "side": 1,
      "message": "I really like the parsing with codemirror! Couple inline comments. I haven\u0027t looked at the tests yet will do that once we\u0027re through this first round.",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec35bbfd_1a2812b0",
        "filename": "front_end/panels/elements/StylePropertyTreeElement.ts",
        "patchSetId": 3
      },
      "lineNbr": 308,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-17T14:50:09Z",
      "side": 1,
      "message": "Can we be more precise than Function here? (also below)",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bdc9628b_18e5a30f",
        "filename": "front_end/panels/elements/StylePropertyTreeElement.ts",
        "patchSetId": 3
      },
      "lineNbr": 308,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-17T16:17:02Z",
      "side": 1,
      "message": "Oh yes, great catch! This was on my mind to change before creating the CL and somehow forgot it... :D",
      "parentUuid": "ec35bbfd_1a2812b0",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a207c1ea_5ddb2668",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-17T14:50:09Z",
      "side": 1,
      "message": "This will accept \"50% red\" or \"red red red red\" too, is that okay? I.e., did we verify or legalize the syntax anywhere else?",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0bb3868_6700cefa",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-17T16:17:02Z",
      "side": 1,
      "message": "Yep, this is okay because we\u0027re only parsing here when the actual syntax is correctly parsed by the Blink. So, we don\u0027t need to be so careful in here. WDYT?",
      "parentUuid": "a207c1ea_5ddb2668",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8230d461_bfab4dc3",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T09:15:04Z",
      "side": 1,
      "message": "Is this the case also when the user enters the color-mix in the styles pane? Also, do we need to return null if the input has been checked?\n\nIf so, I still think it might simpler to just write:\n\ncursor.nextSibling()\nparts.push({\n   name: PartName.Value,\n   value: referenceText.substring(cursor.from, cursor.to),\n})\ncursor.nextSibling()\nconst numberText \u003d referenceText.substring(cursor.from, cursor.to);\nparts.push({\n   name: PartName.Percentage,\n   value: numberText,\n});",
      "parentUuid": "a0bb3868_6700cefa",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3895abc7_8cdca14f",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-18T16:14:24Z",
      "side": 1,
      "message": "I\u0027ve checked the Blink behavior and it seems like it is forgiving in some cases, i.e. it allows `color-mix(in srgb, red 20%, white white white)` so I have added checks for:\n* Interpolation method starting with `in`\n* Multiple values in one part\n* Multiple percentages in one part\n\nThe percentage order is not important in this syntax so I have kept the code the same. WDYT?",
      "parentUuid": "8230d461_bfab4dc3",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7a55b2c_ddb0c2c9",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T16:42:14Z",
      "side": 1,
      "message": "That sounds like a bug in blink that should be fixed. Either way our parser pretty much needs to accept the same input as blink, so we should at least implement the same grammar as them if they\u0027re intentionally more lenient than the spec.",
      "parentUuid": "3895abc7_8cdca14f",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21081dd0_b6d8b373",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-18T16:48:26Z",
      "side": 1,
      "message": "I think we can be safer here and implement what the spec says to make sure that in the worst case, instead of showing a wrong thing, we won\u0027t be showing a swatch but we\u0027ll only show text. WDYT?",
      "parentUuid": "d7a55b2c_ddb0c2c9",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34965bfc_1381af9d",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T16:49:38Z",
      "side": 1,
      "message": "I would like that a lot!",
      "parentUuid": "21081dd0_b6d8b373",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7a6856e_22f1bbef",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-18T16:51:32Z",
      "side": 1,
      "message": "Soooo, is the current situation good? ðŸ˜„",
      "parentUuid": "34965bfc_1381af9d",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb36fc3f_3f521a84",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-19T09:20:25Z",
      "side": 1,
      "message": "With my compiler engineer hat on I would still prefer a proper parse tree over the flat array, my intuition says that the implementation of the processColorMix function would be simplified.\n\nBut I don\u0027t really want to block you on this. One thing left to point out, though, is that if there\u0027s extra whitespace somewhere in the color-mix function, the current implementation will remove them. Are we okay with that? We could cover this in a test, too, to document that that\u0027s expected.",
      "parentUuid": "f7a6856e_22f1bbef",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "28c4b779_2fdc6719",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-19T09:32:28Z",
      "side": 1,
      "message": "For the parse tree vs flat array argument, I don\u0027t have strong preferences but I slightly prefer this version because of the need for retaining the places of the percentage \u0026 value :)\n\nIMO if we were to not have that, then I totally agree that parse tree would make more sense!\n\nFor the implementation details, I fully agree too and this can be improved but I don\u0027t want to spend more time on this part ðŸ˜…\n\nAlsoooo, I think it is fine to strip whitespace while presenting it and I\u0027ve added a test case for it :)",
      "parentUuid": "eb36fc3f_3f521a84",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "087c0f59_460cc8b4",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-17T14:50:09Z",
      "side": 1,
      "message": "should we validate the token sequence?",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e497e79_1f2f3d0d",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-17T16:17:02Z",
      "side": 1,
      "message": "I didn\u0027t understand this exactly, do you mean should we validate `colorInterpolationMethod` tokens start with `in` and are in correct order?\n\nSince we only parse a parseable syntax, I didn\u0027t handle that case too; though open to suggestions! WDYT?",
      "parentUuid": "087c0f59_460cc8b4",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d37d3ad_03978150",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T09:15:04Z",
      "side": 1,
      "message": "Yes, that\u0027s what I meant, if the input is validated then this is fine! (but see above)",
      "parentUuid": "2e497e79_1f2f3d0d",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "873ce72e_164c541c",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 45,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-18T16:14:24Z",
      "side": 1,
      "message": "It seems like Blink is more forgiving here, added some checks. (Let\u0027s continue discussion above if you have any more comments in this topic ðŸ˜Š)",
      "parentUuid": "9d37d3ad_03978150",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca74c9f6_eff2543b",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-17T14:50:09Z",
      "side": 1,
      "message": "What\u0027s the advantage of using a flat tagged array over a structured object or individual members?",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3b05bf8_8a1452f8",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-17T16:17:02Z",
      "side": 1,
      "message": "Great question! I\u0027ve thought about doing it so that the model has `interpolationMethod`, `firstParam` and `secondParam` fields.\n\nThen, in the specific param fields, we need to hold `value`, `percentage` and their order; so essentially holding it in a tagged array made more sense. I thought that since we\u0027re holding the `Percentage` and `Value` in a flat tagged array, then for consistency we can hold everything in such structure.\n\nWDYT do you have any suggestions?",
      "parentUuid": "ca74c9f6_eff2543b",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed5cee18_59ebed99",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T09:15:04Z",
      "side": 1,
      "message": "value and percentage can\u0027t be reordered though, can they (if the input is verified)? If so we don\u0027t need it to be a flat array.",
      "parentUuid": "a3b05bf8_8a1452f8",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "820f2781_3058971c",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-18T16:14:24Z",
      "side": 1,
      "message": "It can be reordered, this is valid syntax: `color-mix(in srgb, 20% red, blue)` ðŸ˜…",
      "parentUuid": "ed5cee18_59ebed99",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5abe953f_66aff543",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T16:49:09Z",
      "side": 1,
      "message": "Not according to the spec, maybe it\u0027s the same problem as above with blink getting the parsing wrong.",
      "parentUuid": "820f2781_3058971c",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "85add525_4576982b",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-18T16:51:07Z",
      "side": 1,
      "message": "I think spec says that we can re-order as far as I understood the description of the spec specification ðŸ˜„\n\nhttps://developer.mozilla.org/en-US/docs/Web/CSS/Value_definition_syntax#:~:text\u003dbold%20%5B-,thin%20%26%26%20%3Clength%3E%20%5D,-Copy%20to%20Clipboard",
      "parentUuid": "5abe953f_66aff543",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a37c366b_6fa36db5",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixSwatch.ts",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-17T14:50:09Z",
      "side": 1,
      "message": "This will do the wrong thing if this.secondColorText \u003d\u003d\u003d this.firstColorText",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6c8185a_555d0c47",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixSwatch.ts",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-17T16:17:02Z",
      "side": 1,
      "message": "Oh, thanks for the catch! I now handled it by replacing the last occurrance for the second color. WDYT? :)",
      "parentUuid": "a37c366b_6fa36db5",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21c4bc56_be8c0044",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixSwatch.ts",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T09:15:04Z",
      "side": 1,
      "message": "Alternatively you could also put  together the color-mix string only on render().",
      "parentUuid": "d6c8185a_555d0c47",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38e17cad_7e2070bd",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixSwatch.ts",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1524702
      },
      "writtenOn": "2023-01-18T16:14:24Z",
      "side": 1,
      "message": "I think I\u0027d prefer to keep the replace logic for now. Joining the text felt a bit more cumbersome since I\u0027d need to account for whether percentage exists, color values of the variables etc. Does it make sense?",
      "parentUuid": "21c4bc56_be8c0044",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99b35a16_d0970ee6",
        "filename": "front_end/ui/legacy/components/inline_editor/ColorMixSwatch.ts",
        "patchSetId": 3
      },
      "lineNbr": 35,
      "author": {
        "id": 1372423
      },
      "writtenOn": "2023-01-18T16:42:14Z",
      "side": 1,
      "message": "Feels a bit dirty to do find and replace, but I don\u0027t have an extremely strong opinion here, so leaving it up to you!",
      "parentUuid": "38e17cad_7e2070bd",
      "revId": "77d2446baf4bb7331bd0763bce479f1ae8ee86d9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}