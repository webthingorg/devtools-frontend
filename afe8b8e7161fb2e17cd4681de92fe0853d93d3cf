{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3f17a133_a78f5e1f",
        "filename": "front_end/third_party/codemirror/package/addon/runmode/runmode-standalone.js",
        "patchSetId": 30
      },
      "lineNbr": 262,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2022-01-26T11:55:12Z",
      "side": 0,
      "message": "Unfortunately, for both CodeMirror and LightHouse, we can\u0027t make these changes as they are third-party packages. The next time they would be updated, they would revert these changes.\n\nCould you let me know why we need to make these changes here? Is there maybe a way we can workaround it by reconfiguring esbuild or filing an upstream bug for them to resolve the problem?\n\nEdit: aha, I just saw you created https://github.com/evanw/esbuild/issues/1964 Let\u0027s see what the upstream maintainers say.",
      "range": {
        "startLine": 262,
        "startChar": 4,
        "endLine": 262,
        "endChar": 76
      },
      "revId": "afe8b8e7161fb2e17cd4681de92fe0853d93d3cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4371920c_16078177",
        "filename": "front_end/third_party/codemirror/package/addon/runmode/runmode-standalone.js",
        "patchSetId": 30
      },
      "lineNbr": 262,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2022-01-28T04:38:34Z",
      "side": 0,
      "message": "Changing extention of those files to .mjs works with esbuild, but that breaks tsc build like\nhttps://ci.chromium.org/ui/p/devtools-frontend/builders/try/devtools_frontend_linux_dbg/b8823822450801991089/overview\nwith https://crrev.com/c/3422728/1\n\nI\u0027m not sure why we see this kind of error. I tried to add `exclude: [\u0027**/*.mjs\u0027]` around some tsconfig.json, but that doesn\u0027t fix the error.\n\nThis maybe due to that TypeScript doesn\u0027t support ES module yet?\nhttps://www.typescriptlang.org/docs/handbook/esm-node.html\n\nDo you know how to fix this?",
      "parentUuid": "3f17a133_a78f5e1f",
      "range": {
        "startLine": 262,
        "startChar": 4,
        "endLine": 262,
        "endChar": 76
      },
      "revId": "afe8b8e7161fb2e17cd4681de92fe0853d93d3cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d068fae1_61d2fb5f",
        "filename": "front_end/third_party/codemirror/package/addon/runmode/runmode-standalone.js",
        "patchSetId": 30
      },
      "lineNbr": 262,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2022-01-31T12:57:01Z",
      "side": 0,
      "message": "We will need to update the `.tsconfig.json` files we check in for our third_party projects, e.g. https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/front_end/third_party/codemirror/codemirror-tsconfig.json;l\u003d1?q\u003df:codemirror-tsconfig.json\u0026sq\u003d\u0026ss\u003dchromium and https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/front_end/third_party/lighthouse/lighthouse-tsconfig.json;l\u003d1?q\u003dlighthouse-tsconfig.json\u0026ss\u003dchromium",
      "parentUuid": "4371920c_16078177",
      "range": {
        "startLine": 262,
        "startChar": 4,
        "endLine": 262,
        "endChar": 76
      },
      "revId": "afe8b8e7161fb2e17cd4681de92fe0853d93d3cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c640374a_9bb87093",
        "filename": "front_end/third_party/codemirror/package/addon/runmode/runmode-standalone.js",
        "patchSetId": 30
      },
      "lineNbr": 262,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2022-01-31T13:02:32Z",
      "side": 0,
      "message": "How do we need to update the config?\nChanging filename in https://chromium-review.googlesource.com/c/devtools/devtools-frontend/+/3422728/3/front_end/third_party/codemirror/codemirror-tsconfig.json doesn\u0027t avoid the issue.",
      "parentUuid": "d068fae1_61d2fb5f",
      "range": {
        "startLine": 262,
        "startChar": 4,
        "endLine": 262,
        "endChar": 76
      },
      "revId": "afe8b8e7161fb2e17cd4681de92fe0853d93d3cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ed58657_1cc6447a",
        "filename": "front_end/third_party/codemirror/package/addon/runmode/runmode-standalone.js",
        "patchSetId": 30
      },
      "lineNbr": 262,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2022-01-31T13:33:20Z",
      "side": 0,
      "message": "We would need to update all files in this array, e.g. `xml.mjs` and `css.mjs` as well. Does it work then? If it doesn\u0027t, I can patch this CL locally and investigate tomorrow.",
      "parentUuid": "c640374a_9bb87093",
      "range": {
        "startLine": 262,
        "startChar": 4,
        "endLine": 262,
        "endChar": 76
      },
      "revId": "afe8b8e7161fb2e17cd4681de92fe0853d93d3cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f225fa2c_eb5929cb",
        "filename": "front_end/third_party/codemirror/package/addon/runmode/runmode-standalone.js",
        "patchSetId": 30
      },
      "lineNbr": 262,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2022-01-31T19:40:44Z",
      "side": 0,
      "message": "Yes, that doesn\u0027t work. See https://chromium-review.googlesource.com/c/devtools/devtools-frontend/+/3422728 which is a separate CL changing only `runmode-standalone.js` to confirm that.",
      "parentUuid": "4ed58657_1cc6447a",
      "range": {
        "startLine": 262,
        "startChar": 4,
        "endLine": 262,
        "endChar": 76
      },
      "revId": "afe8b8e7161fb2e17cd4681de92fe0853d93d3cf",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}