{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "43f406fc_0a48d808",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1511722
      },
      "writtenOn": "2023-11-06T12:10:12Z",
      "side": 1,
      "message": "Looks good, but needs more tests (at minimum for `toggleWindowControlsToolbar`, but ideally also for `initializeStyleSheetText` and `toggleEmulatedOverlay`)",
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "40264bf9_1029d828",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1546108
      },
      "writtenOn": "2023-11-08T23:03:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "43f406fc_0a48d808",
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10881870_7d18c95c",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 834,
      "author": {
        "id": 1511722
      },
      "writtenOn": "2023-11-06T12:10:12Z",
      "side": 1,
      "message": "Please add a blank line above",
      "range": {
        "startLine": 834,
        "startChar": 0,
        "endLine": 834,
        "endChar": 35
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "43bccc1e_41b9ab06",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 834,
      "author": {
        "id": 1546108
      },
      "writtenOn": "2023-11-08T23:03:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10881870_7d18c95c",
      "range": {
        "startLine": 834,
        "startChar": 0,
        "endLine": 834,
        "endChar": 35
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbf9a228_44cb1006",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 854,
      "author": {
        "id": 1511722
      },
      "writtenOn": "2023-11-06T12:10:12Z",
      "side": 1,
      "message": "Let\u0027s make this a getter for consistency",
      "range": {
        "startLine": 854,
        "startChar": 0,
        "endLine": 854,
        "endChar": 61
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "798a6634_7f656212",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 854,
      "author": {
        "id": 1546108
      },
      "writtenOn": "2023-11-08T23:03:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dbf9a228_44cb1006",
      "range": {
        "startLine": 854,
        "startChar": 0,
        "endLine": 854,
        "endChar": 61
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fdf072e4_b2ea05f2",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1511722
      },
      "writtenOn": "2023-11-06T12:10:12Z",
      "side": 1,
      "message": "Please add a comment explaining why do we need this transformation.",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "099681dd_6c3784bf",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1546108
      },
      "writtenOn": "2023-11-08T23:03:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fdf072e4_b2ea05f2",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16e7a06f_0fc42ef8",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1511722
      },
      "writtenOn": "2023-11-09T06:26:32Z",
      "side": 1,
      "message": "So much is clear from the code already. But why do we need to transform CSS variables? What if we don\u0027t?",
      "parentUuid": "099681dd_6c3784bf",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab127312_1bc1d486",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1546108
      },
      "writtenOn": "2023-11-09T18:40:28Z",
      "side": 1,
      "message": "Transforming the CSS variables `titlebar-area-{x, y, width, and height}` would emulate the window controls toolbar for a selected platform (Mac, Windows, Linux). If we do not transform the CSS variables, overlay would not be emulated so nothing would happen.",
      "parentUuid": "16e7a06f_0fc42ef8",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ecd86cc_dc4031f1",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1511722
      },
      "writtenOn": "2023-11-10T14:05:55Z",
      "side": 1,
      "message": "Sorry, but it is still not clear to me why is that. Maybe link to an explainer or design doc here?",
      "parentUuid": "ab127312_1bc1d486",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dba60484_602ef7aa",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1546108
      },
      "writtenOn": "2023-11-10T19:14:13Z",
      "side": 1,
      "message": "So the",
      "parentUuid": "2ecd86cc_dc4031f1",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5135b6f0_6dac3dcb",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1546108
      },
      "writtenOn": "2023-11-10T19:14:13Z",
      "side": 1,
      "message": "Sorry let me try again. So we obtain the original stylesheet from the current webpage and store it in the `originalStylesheetText` variable. When the overlay is activated, the `#transformStyleSheet` function alters specific CSS environment variables based on the selected platform. These variables are detailed on page 9 in the explainer found at https://bit.ly/3w5hn7y. The `updatedStylesheet` variable, which contains the styles for the emulated overlay, is the return value of this function. This updated stylesheet is then applied using the `setStyleSheetText` function to emulate the overlay.\n\nIn summary, the primary objective of this function is to adjust certain CSS environment variables within the existing stylesheet and provide it as the style sheet for the emulated overlay.",
      "parentUuid": "2ecd86cc_dc4031f1",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0833ebaf_029801a0",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1511722
      },
      "writtenOn": "2023-11-10T20:30:24Z",
      "side": 1,
      "message": "This makes sense, thanks a lot. Could you please add the last sentence as a code comment?",
      "parentUuid": "dba60484_602ef7aa",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35b73407_0848881b",
        "filename": "front_end/core/sdk/OverlayModel.ts",
        "patchSetId": 3
      },
      "lineNbr": 920,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2024-01-25T14:04:02Z",
      "side": 1,
      "message": "I know this has shipped already, but one problem I see with this approach is that we\u0027re modifying the webpage\u0027s stylesheet. If I inspect the element that uses the env() function in CSS, I\u0027m no longer seeing my original code. And if I toggle the WCO simulation tool while looking at the styles, I can see it change at the same time.\n\nIn general (actually, I think, always), DevTools doesn\u0027t change the authored CSS in any way. This way, there\u0027s no user confusion when they see something different in the Styles pane than what they wrote.\n\nIs it possible that a backend-only solution would exist? A rendering engine change that would actually set the value of the title-area-* variables?",
      "parentUuid": "0833ebaf_029801a0",
      "range": {
        "startLine": 920,
        "startChar": 0,
        "endLine": 920,
        "endChar": 30
      },
      "revId": "8154a4c76850ba1f59740152c62a71921926d54d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}