{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a64793ae_82c048c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-02-02T15:37:34Z",
      "side": 1,
      "message": "The issues reporting looks good to me, but I\u0027m not convinced of the ContrastCheckTrigger. It feels this should be part of the elements panel, but I guess you want the issues to appear independent of the panel?",
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "677ef02d_82ac3e51",
        "filename": "front_end/browser_sdk/browser_sdk.js",
        "patchSetId": 12
      },
      "lineNbr": 13,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-02-02T15:37:34Z",
      "side": 1,
      "message": "Wouldn\u0027t it make more sense to have this in the elements panel?",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ad6393b_d8f0b001",
        "filename": "front_end/browser_sdk/browser_sdk.js",
        "patchSetId": 12
      },
      "lineNbr": 13,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-02-03T09:26:26Z",
      "side": 1,
      "message": "Yes, it should be independent from the Elements panel or any UI, in my opinion, so that it\u0027s triggered as early as possible and does not depend on the UI.",
      "parentUuid": "677ef02d_82ac3e51",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e7fe755_d9bacabc",
        "filename": "front_end/browser_sdk/browser_sdk.js",
        "patchSetId": 12
      },
      "lineNbr": 13,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-02-03T13:52:13Z",
      "side": 1,
      "message": "I think the tests are telling us that we can\u0027t do it this way. Can we hook up the ContrastCheckTrigger in the elements panel in the meantime?",
      "parentUuid": "4ad6393b_d8f0b001",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9896344_be289f83",
        "filename": "front_end/browser_sdk/browser_sdk.js",
        "patchSetId": 12
      },
      "lineNbr": 13,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-02-03T14:01:29Z",
      "side": 1,
      "message": "The tests fail because the evaluate call for the document readiness runs on a provisional frame (https://source.chromium.org/chromium/chromium/src/+/master:third_party/blink/renderer/core/frame/local_frame.h;l\u003d499;drc\u003dc0a9115bc2eac671d3fa00ddebd8911144905b1c). And the evaluate call is executed when a new resource tree model is added. I am not sure yet if the provisional frame is  the main frame or one of the iframes but I think it could happen even if we trigger the check from the Elements UI because frames are loaded async. I can reproduce the issue locally so I will check what exactly is causing this.",
      "parentUuid": "0e7fe755_d9bacabc",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9139963_b6c42fb7",
        "filename": "front_end/browser_sdk/browser_sdk.js",
        "patchSetId": 12
      },
      "lineNbr": 13,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-02-04T06:52:29Z",
      "side": 1,
      "message": "So it was caused by iframe navigations: when DevTools creates a new model for a target it does not mean that the target is ready to be queries because the frame might be provisional. The solution is to wait for the frameAdded event at which point a frame is ready. At this point, the test failures are not crashes anymore but a mismatch between the expected number of sources (a new source is created by the evaluate call): https://test-results.appspot.com/data/layout_results/devtools_frontend_linux_blink_light_rel/11858/blink_web_tests%20%28with%20patch%29/layout-test-results/results.html\n\nBut I realised that the querying should not happen when the experiment is disabled (which is the default state) so I have updated my CL accordingly. If the feature goes out of the experimentation phase, we\u0027d need to update test expectations.",
      "parentUuid": "b9896344_be289f83",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bda8b1ba_60da27cb",
        "filename": "front_end/issues/AffectedElementsWithLowContrastView.ts",
        "patchSetId": 12
      },
      "lineNbr": 31,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-02-02T15:37:34Z",
      "side": 1,
      "message": "Please use appendIssueDetailCell which is moved to AffectedElementsView in https://crrev.com/c/2666694 (should be landing soon).",
      "range": {
        "startLine": 31,
        "startChar": 10,
        "endLine": 31,
        "endChar": 22
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ccd56f2f_55540b86",
        "filename": "front_end/issues/AffectedElementsWithLowContrastView.ts",
        "patchSetId": 12
      },
      "lineNbr": 31,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-02-03T09:26:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bda8b1ba_60da27cb",
      "range": {
        "startLine": 31,
        "startChar": 10,
        "endLine": 31,
        "endChar": 22
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e45b1200_72677e1d",
        "filename": "front_end/sdk/LowTextContrastIssue.ts",
        "patchSetId": 12
      },
      "lineNbr": 18,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-02-02T15:37:34Z",
      "side": 1,
      "message": "This means that only one issue per node will be reported. If that is the intention, please add a comment that you are disregarding the other properties of the issue details intentionally.",
      "range": {
        "startLine": 18,
        "startChar": 11,
        "endLine": 18,
        "endChar": 62
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dbaedd03_1a5e44bb",
        "filename": "front_end/sdk/LowTextContrastIssue.ts",
        "patchSetId": 12
      },
      "lineNbr": 18,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-02-03T09:26:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e45b1200_72677e1d",
      "range": {
        "startLine": 18,
        "startChar": 11,
        "endLine": 18,
        "endChar": 62
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7e5646d_f71800a6",
        "filename": "test/e2e/issues/low-text-contrast-issues_test.ts",
        "patchSetId": 12
      },
      "lineNbr": 11,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-02-02T15:37:34Z",
      "side": 1,
      "message": "Very nice, please move this to a shared place so it can be used in other places.",
      "range": {
        "startLine": 11,
        "startChar": 9,
        "endLine": 11,
        "endChar": 22
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6954da8e_66429604",
        "filename": "test/e2e/issues/low-text-contrast-issues_test.ts",
        "patchSetId": 12
      },
      "lineNbr": 11,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-02-03T09:26:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d7e5646d_f71800a6",
      "range": {
        "startLine": 11,
        "startChar": 9,
        "endLine": 11,
        "endChar": 22
      },
      "revId": "68184ac73b72cf1e4bd43c94108507f7a8c01d0d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}