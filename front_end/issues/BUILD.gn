# Copyright 2020 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("../../scripts/build/ninja/copy.gni")
import("../../scripts/build/ninja/devtools_entrypoint.gni")
import("../../scripts/build/ninja/devtools_module.gni")

devtools_module("issues") {
  sources = [
    "AffectedBlockedByResponseView.ts",
    "AffectedCookiesView.ts",
    "AffectedElementsView.ts",
    "AffectedElementsWithLowContrastView.ts",
    "AffectedHeavyAdView.ts",
    "AffectedResourcesView.ts",
    "AffectedSharedArrayBufferIssueDetailsView.ts",
    "AffectedTrustedWebActivityIssueDetailsView.ts",
    "CSPViolationsListView.ts",
    "CSPViolationsView.ts",
    "ComboBoxOfCheckBoxes.ts",
    "CorsIssueDetailsView.ts",
    "IssueAggregator.ts",
    "IssueRevealer.ts",
    "IssueView.ts",
    "IssuesPane.ts",
    "MarkdownIssueDescription.ts",
  ]

  deps = [
    "../components:bundle",
    "../core/common:bundle",
    "../core/i18n:bundle",
    "../core/sdk:bundle",
    "../models/issues_manager:bundle",
    "../panels/console_counters:bundle",
    "../panels/elements:bundle",
    "../panels/network:bundle",
    "../third_party/lit-html:bundle",
    "../third_party/marked:bundle",
    "../ui/components:bundle",
    "../ui/components/data_grid:bundle",
    "../ui/components/linkifier:bundle",
    "../ui/components/markdown_view:bundle",
    "../ui/legacy:bundle",
  ]

  visibility = [ "../../test/unittests/front_end/issues" ]
}

copy_to_gen("descriptions") {
  sources = [
    "descriptions/CoepCoopSandboxedIframeCannotNavigateToCoopPage.md",
    "descriptions/CoepCorpNotSameOrigin.md",
    "descriptions/CoepCorpNotSameOriginAfterDefaultedToSameOriginByCoep.md",
    "descriptions/CoepCorpNotSameSite.md",
    "descriptions/CoepFrameResourceNeedsCoepHeader.md",
    "descriptions/LowTextContrast.md",
    "descriptions/SameSiteExcludeContextDowngradeRead.md",
    "descriptions/SameSiteExcludeContextDowngradeSet.md",
    "descriptions/SameSiteExcludeNavigationContextDowngrade.md",
    "descriptions/SameSiteNoneInsecureErrorRead.md",
    "descriptions/SameSiteNoneInsecureErrorSet.md",
    "descriptions/SameSiteNoneInsecureWarnRead.md",
    "descriptions/SameSiteNoneInsecureWarnSet.md",
    "descriptions/SameSiteUnspecifiedLaxAllowUnsafeRead.md",
    "descriptions/SameSiteUnspecifiedLaxAllowUnsafeSet.md",
    "descriptions/SameSiteUnspecifiedTreatedAsLaxRead.md",
    "descriptions/SameSiteUnspecifiedTreatedAsLaxSet.md",
    "descriptions/SameSiteWarnCrossDowngradeRead.md",
    "descriptions/SameSiteWarnCrossDowngradeSet.md",
    "descriptions/SameSiteWarnStrictLaxDowngradeStrict.md",
    "descriptions/TwaDigitalAssetLinksFailed.md",
    "descriptions/TwaHttpError.md",
    "descriptions/TwaPageUnavailableOffline.md",
    "descriptions/corsInsecurePrivateNetwork.md",
    "descriptions/cspEvalViolation.md",
    "descriptions/cspInlineViolation.md",
    "descriptions/cspTrustedTypesPolicyViolation.md",
    "descriptions/cspTrustedTypesSinkViolation.md",
    "descriptions/cspURLViolation.md",
    "descriptions/heavyAd.md",
    "descriptions/mixedContent.md",
    "descriptions/sharedArrayBuffer.md",
  ]
}

devtools_entrypoint("bundle") {
  entrypoint = "issues.ts"

  deps = [ ":issues" ]
  data_deps = [ ":descriptions" ]
}

devtools_entrypoint("meta") {
  entrypoint = "issues-meta.ts"

  deps = [ ":bundle" ]
}
