{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5b36c552_d245d193",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-10-08T05:40:13Z",
      "side": 1,
      "message": "Johan, could you please take a look? Maybe we can discuss this problem with the a11y tem? ",
      "revId": "3c39ec5b105f50efe76cbb2af756b936da44824b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d68bbaa_dcd7a027",
        "filename": "front_end/ui/legacy/ARIAUtils.ts",
        "patchSetId": 3
      },
      "lineNbr": 490,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-10-07T07:02:33Z",
      "side": 1,
      "message": "hm, is there some other way? I don\u0027t think like adding arbitrary timeouts is a good idea.",
      "revId": "3c39ec5b105f50efe76cbb2af756b936da44824b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bba695e7_a4413321",
        "filename": "front_end/ui/legacy/ARIAUtils.ts",
        "patchSetId": 3
      },
      "lineNbr": 490,
      "author": {
        "id": 1341633
      },
      "writtenOn": "2021-10-07T17:56:33Z",
      "side": 1,
      "message": "Unfortunately, this seems like the most straightforward way to fix the alert functionality. I tested on multiple machines that 200ms is the minimum needed for NVDA to register that the alert string has changed from a blank string to the desired string, so that number isn\u0027t completely arbitrary. Plus, the timeout only occurs when the announced string is the same as the current string which I don\u0027t believe should happen very often.\n\nAnother solution I can think of would be to create another alert element and alternate between the two. When one alert string is set, it resets the other alert element string to prime it for the next alert call. I believe this should also work, but seems a bit messier than the original solution.\n\nLet me know what you think.",
      "parentUuid": "0d68bbaa_dcd7a027",
      "revId": "3c39ec5b105f50efe76cbb2af756b936da44824b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f031e93f_b8f50285",
        "filename": "front_end/ui/legacy/ARIAUtils.ts",
        "patchSetId": 3
      },
      "lineNbr": 490,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-10-08T08:42:32Z",
      "side": 1,
      "message": "And how did it work previously? The comment says that setting textContent to empty should be sufficient. Is it a regression in the screen reader implementation?",
      "parentUuid": "bba695e7_a4413321",
      "revId": "3c39ec5b105f50efe76cbb2af756b936da44824b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71f3fbe9_678180bd",
        "filename": "front_end/ui/legacy/ARIAUtils.ts",
        "patchSetId": 3
      },
      "lineNbr": 490,
      "author": {
        "id": 1439900
      },
      "writtenOn": "2021-10-08T12:18:00Z",
      "side": 1,
      "message": "I actually prefer the solution with two alert elements and alternating between them.\nWith the timeout, I think we would need to check with other screen readers too, and it seems a bit more fragile to me.\nI looked briefly at NVDA, and I can\u0027t really see anything about checking the time between alert events there. I wonder if the reason the current solution works inconsistently stems from Chromium itself:\nIf we erase the content of the element and reinsert it immediately afterwards, and this all happens within the same layout cycle, I think the AXTree serializer in Chromium is supposed to disregard it. The justification being that the tree has not changed since the last time anything was reported to the screen reader.\nIf that is the case, we definitely don\u0027t want the setTimeout solution.",
      "parentUuid": "bba695e7_a4413321",
      "revId": "3c39ec5b105f50efe76cbb2af756b936da44824b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}