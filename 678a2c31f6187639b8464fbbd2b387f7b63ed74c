{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2fcdb1b5_d7e7937d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1475325
      },
      "writtenOn": "2021-01-22T06:43:20Z",
      "side": 1,
      "message": "PTAL again, thanks!",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3749f616_89460fc5",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 272,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-01-22T07:07:24Z",
      "side": 1,
      "message": "I think it\u0027s possible to enable the domain multiple times by invoking requestRootNode twice before the _disableAccessibilityDomainTimer is set.\n\nCould we enable the agent when we start working with the model? For example, other models enable the model in the constructor and disable in suspendModel call (for example, CSSModel). Would it work for the AccessibilityModel as well? \n\nBtw, some other calls in A11yModel do not require the agent to be enabled. Why do the node retrieval operations need it be enabled?",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "888aceda_1db56a2b",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 272,
      "author": {
        "id": 1475325
      },
      "writtenOn": "2021-01-25T03:23:52Z",
      "side": 1,
      "message": "I have enabled the agent in the constructor and made a suspendModel() function. Looking at examples such as CSSModel, I can\u0027t seem to find where this function is called. Could you please elaborate on when the model should be disabled?\n\nWe need AXNode ids to be consistent between getting the full tree and the unloaded children, see https://source.chromium.org/chromium/chromium/src/+/master:third_party/blink/public/devtools_protocol/browser_protocol.pdl;l\u003d186?q\u003dbrowser_protocol.pdl. The existing getPartialAXTree protocol method throws the cache away once it\u0027s built up and returns an ancestor cache. Enabling the model ensures the AXContext and cache persist between calls to the accessibility agent.",
      "parentUuid": "3749f616_89460fc5",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3d7db0e_3963bf11",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 272,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-01-25T08:42:38Z",
      "side": 1,
      "message": "The model will disabled when SDKModel::suspect is called. It happens when, for example, a Lighthouse audit is started. Probably, we\u0027d need to override the resumeModel() call as well and enable the model there. I think having the model enabled in the constructor is appropriate because eventually the a11y tree has to be a live tree and caching should persist between calls.",
      "parentUuid": "888aceda_1db56a2b",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc97d0c4_3b0a72b9",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 272,
      "author": {
        "id": 1475325
      },
      "writtenOn": "2021-01-26T23:27:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f3d7db0e_3963bf11",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6d53876_3b1ce71e",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 287,
      "author": {
        "id": 1410814
      },
      "writtenOn": "2021-01-22T07:07:24Z",
      "side": 1,
      "message": "Why do we need the timer for disabling the a11y domain? Could we do it without using a timeout?",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16d9d10c_57961f87",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 287,
      "author": {
        "id": 1475325
      },
      "writtenOn": "2021-01-25T03:23:52Z",
      "side": 1,
      "message": "A suggestion from Mathias to include disabling into this CL. I had a timer and added a TODO to improve it later on, but have now replaced it with suspendModel(). Is this a better alternative to my previous attempt?",
      "parentUuid": "f6d53876_3b1ce71e",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "952daaea_5030af42",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 287,
      "author": {
        "id": 1214214
      },
      "writtenOn": "2021-01-25T06:29:48Z",
      "side": 1,
      "message": "\u003e A suggestion from Mathias to include disabling into this CL. I had a timer and added a TODO to improve it later on, but have now replaced it with suspendModel(). Is this a better alternative to my previous attempt?\n\nUsing suspendModel() addresses the TODO â€” thanks!",
      "parentUuid": "16d9d10c_57961f87",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e95f4cb3_0ae0cec7",
        "filename": "front_end/sdk/AccessibilityModel.js",
        "patchSetId": 6
      },
      "lineNbr": 287,
      "author": {
        "id": 1475325
      },
      "writtenOn": "2021-01-26T23:27:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "952daaea_5030af42",
      "revId": "678a2c31f6187639b8464fbbd2b387f7b63ed74c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}