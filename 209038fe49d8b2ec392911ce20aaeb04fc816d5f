{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a5132037_2ba24b83",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1255015
      },
      "writtenOn": "2021-05-25T02:21:59Z",
      "side": 1,
      "message": "@Tim PTAL, I think this is the right way to handle multiple targets, but I\u0027m not 100% sure about it. It does work though.\n\n@Thomas, since you\u0027re probably interested :)",
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aed15e42_ae3d625b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-05-25T10:29:57Z",
      "side": 1,
      "message": "Sigurd, could you double check the integration with the SDK models?",
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3e3665ac_e0a24c4c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-05-25T11:06:04Z",
      "side": 1,
      "message": "Thanks for sending the CL. How will the front-end deal with this change? Is it obvious to the user to which frame the media events belong? Do we need to update the presentation layer as well?\n\nAlso, would it be possible we add an e2e test for this? (To document how the new code-paths can be triggered)",
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4207d260_c644a7ee",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1255015
      },
      "writtenOn": "2021-05-25T21:29:13Z",
      "side": 1,
      "message": "The frontend just displays them as normal players, though the PlaybackFrameUrl property does display the worker script when clicked on.\n\nI am not sure I\u0027ll be able to add an e2e test just yet, even once the chromium side of things gets checked in, webcodecs in workers is still behind the --enable-experimental-web-platform-features flag.\n\nThomas has a demo of the webcodecs that I used to test this: https://tguilbert-google.github.io/webcodecs/worker/index.html\n\nbut you\u0027d need the patches https://chromium-review.googlesource.com/c/chromium/src/+/2914196 and https://chromium-review.googlesource.com/c/chromium/src/+/2897947 to be applied for it to work.\nwithout these patches everything on the devtools end behaves exactly the same as it did before.",
      "parentUuid": "3e3665ac_e0a24c4c",
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4ba96a2_a74977cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2021-05-26T10:25:07Z",
      "side": 1,
      "message": "The experimental web platform features shouldn\u0027t be a problem.\n\nCan this wait until the back-end changes are actually in? \n\nThis CL also alters behavior for out-of-process iframes: It looks like we weren\u0027t showing messages for them (?), was this intentional? Will e.g. ads now produce a lot of messages?\n\nCould you give an example of a media message a dedicated worker might trigger?",
      "parentUuid": "4207d260_c644a7ee",
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3fbcdf2d_c62c924d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1255015
      },
      "writtenOn": "2021-05-26T19:24:54Z",
      "side": 1,
      "message": "This doesn\u0027t change the behavior for out of process iframes, those have always worked as though the video was on the page. Additionally, we want to capture everything on the page, including ads, regardless of how many messages they have.\n\nHere\u0027s a screenshot of what the page i\u0027ve been testing with creates for webcodecs:\nhttps://files.tedm.io/dtss/webcodecs.png\n\nthe demo creates 4 players and they all show up. Right now webcodecs doesn\u0027t send much info other than the player name, since nothing was really logged since the logs hadn\u0027t been working.\n\nThis can wait until the back-end changes are ready.",
      "parentUuid": "b4ba96a2_a74977cf",
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b4b2e1b_da0f9b04",
        "filename": "front_end/panels/media/MediaModel.ts",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-05-25T10:29:57Z",
      "side": 1,
      "message": "These `invoke_enable` calls actually return a Promise. Therefore here (and in `targetAdded`) they are racy. (That was true for the previous implementation of `ensureEnabled` as well).\n\nI suppose that this is fine for now, but would be good to cleanup later.",
      "range": {
        "startLine": 49,
        "startChar": 12,
        "endLine": 49,
        "endChar": 25
      },
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95d7f8d0_4c32bbec",
        "filename": "front_end/panels/media/MediaModel.ts",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1255015
      },
      "writtenOn": "2021-05-25T21:29:13Z",
      "side": 1,
      "message": "should I just do something like:\nwait().then(agent.invoke_enable())\n? or just leave it be for now. These enable calls don\u0027t don\u0027t return anything useful.",
      "parentUuid": "2b4b2e1b_da0f9b04",
      "range": {
        "startLine": 49,
        "startChar": 12,
        "endLine": 49,
        "endChar": 25
      },
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d215f6f8_a5616de5",
        "filename": "front_end/panels/media/MediaModel.ts",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-05-26T09:50:54Z",
      "side": 1,
      "message": "The result themselves is not particuarly useful, but the `ensureEnabled` should (I think) not finish before the `invoke_enable` calls have succeeded. Since the `invoke_enable` calls return a Promise, you have to await the promises before you are really sure that all of them are enabled.\n\nThen again, the current implementation already has this race condition, so I don\u0027t think we are in a particularly worse state after this CL. Therefore I am okay with landing as-is and fixing the race condition in a follow-up CL.",
      "parentUuid": "95d7f8d0_4c32bbec",
      "range": {
        "startLine": 49,
        "startChar": 12,
        "endLine": 49,
        "endChar": 25
      },
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65e1618c_8bf19fac",
        "filename": "front_end/panels/media/MediaModel.ts",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-05-25T10:29:57Z",
      "side": 1,
      "message": "Don\u0027t we want to remove the mediaAgent from `this._agents` here?",
      "range": {
        "startLine": 83,
        "startChar": 4,
        "endLine": 83,
        "endChar": 23
      },
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae631d82_1e587035",
        "filename": "front_end/panels/media/MediaModel.ts",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1255015
      },
      "writtenOn": "2021-05-25T21:29:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "65e1618c_8bf19fac",
      "range": {
        "startLine": 83,
        "startChar": 4,
        "endLine": 83,
        "endChar": 23
      },
      "revId": "209038fe49d8b2ec392911ce20aaeb04fc816d5f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}