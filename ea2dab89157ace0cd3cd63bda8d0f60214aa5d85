{
  "comments": [
    {
      "key": {
        "uuid": "62b73bea_f61ab44f",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-02-12T08:41:01Z",
      "side": 1,
      "message": "It would be nice if this was a link. I\u0027m afraid it can\u0027t be reasonably clicked here, but it is better than nothing.",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8372fa3d_5a43205b",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-02-12T22:08:25Z",
      "side": 1,
      "message": "I could try and make it so that when you click the info icon which this thumbnail appears for it would go to the link. Do you think that would be helpful?",
      "parentUuid": "62b73bea_f61ab44f",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0eb954dc_b8dbbb4f",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-02-13T12:01:48Z",
      "side": 1,
      "message": "I think this would be difficult to discover for users and probably too much for this change. In the future, we should probably think about providing a link to an article/documentation for each of these values.\n\nWhat about rephrasing as follows for now:\n\n    This cookie was blocked because neither did its domain exactly match the requests url\u0027s domain nor was it configured to apply to subdomains via the \"Domain\u003d\" attribute.\n\nLily, WDYT?",
      "parentUuid": "8372fa3d_5a43205b",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ddc893e_0dd212d4",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-02-28T20:54:20Z",
      "side": 1,
      "message": "This does sound simpler. Lily, is it less correct than the current one?\nMaybe we could just say as defined in the cookies rfc instead of having the link?",
      "parentUuid": "0eb954dc_b8dbbb4f",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28e6fc73_54ecdb83",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1306177
      },
      "writtenOn": "2020-02-28T21:15:17Z",
      "side": 1,
      "message": "Oh, sorry I missed this thread.\n\nIt\u0027s not exactly correct. You could have a cookie that says Domain\u003dfoo.example.com, which would apply to all *.foo.example.com domains. But if the request URL is bar.example.com, it would get blocked because it\u0027s not a host cookie with an exact match and it\u0027s not a subdomain of the Domain attribute value. Similarly if the cookie says Domain\u003dfoo.bar.example.com, and the request URL is bar.example.com, it\u0027s blocked.\n\nIt\u0027s probably fine to not provide a link for \"registrable domain\". It\u0027s easy enough to Google.\n\nHm, we don\u0027t distinguish between the 2 cases for rejecting a cookie based on domain mismatch, though I suppose it\u0027s possible to figure out if you have the correct Domain attribute value. (If it starts with a dot, then it\u0027s a domain cookie, and we can say \"the request URL\u0027s domain was not a subdomain of the cookie\u0027s Domain attribute value\". If it doesn\u0027t start with a dot, we can say \"the cookie did not specify a Domain attribute and the request URL\u0027s domain was not an exact match for the domain of the cookie\u0027s setter\".) This depends on having the correct Domain attribute of the cookie though, which I think we don\u0027t currently have in the frontend.",
      "parentUuid": "5ddc893e_0dd212d4",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e441a34_5e7fd2fc",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-03-02T19:05:11Z",
      "side": 1,
      "message": "By the 2 cases I\u0027m assuming you mean the two you mentioned:\n1. cookie\u0027s domain is foo.example.com, request url is bar.example.com\n2. cookie\u0027s domain is foo.bar.example.com, request url is bar.example.com\nIn case 1 the subdomains differ, and in case 2 the cookie is a subdomain of the url.\n\nYou mentioned a cookie\u0027s domain starting with a dot meaning that it is a domain cookie - I thought all cookies have a domain? What\u0027s a domain cookie? What difference does it make if the cookie was set with a specific domain vs implicitly got one based on the request url\u0027s domain?\n\nI removed the rfc link, I also think just saying registrable domain is pretty good, it actually makes sense as a term on its own - a domain which you can register, as opposed to a TLD or a subdomain.",
      "parentUuid": "28e6fc73_54ecdb83",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87527ce3_781a8b05",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1306177
      },
      "writtenOn": "2020-03-02T19:21:12Z",
      "side": 1,
      "message": "Sorry for being unclear. I meant the 2 cases of\n\n1. The cookie didn\u0027t explicitly specify a Domain attribute when it was set. In this case, it defaults to being a \"host cookie\" i.e. it\u0027s only sent to the exact host that set it. Internally, we represent this as a domain attribute (i.e. CanonicalCookie::Domain()) without a leading dot, which is exactly equal to the host() of the URL that set it.\n\n2. The cookie explicitly specified \"Domain\u003dfoo.com\" attribute. In this case, it\u0027s a \"domain cookie\" which is sent to foo.com as well as *.foo.com domains. Internally, we represent this as CanonicalCookie::Domain() returns a string with a leading dot. (For historical reasons -- we used to require that the Domain attribute in a Set-Cookie line carry a leading dot, but we no longer require that.)\n\nThe dot is how we distinguish a host cookie set by foo.com vs a domain cookie that specified \"Domain\u003dfoo.com\". The former would have a Domain() attribute of \"foo.com\" and the latter would have a Domain() attribute of \".foo.com\".\n\nI was more just thinking aloud... I doubt it\u0027s worth drawing the distinction between these two cases, at least not in the frontend. If we decide to do this down the line, we should add an extra CanonicalCookie::CookieInclusionStatus::ExclusionReason and plumb that through. (And there\u0027s also this issue https://crbug.com/1027752 which I think precludes getting the correct domain value in some cases.)\n\nAnd I think the wording you have in Patchset 4 is fine.",
      "parentUuid": "2e441a34_5e7fd2fc",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "013a09e1_319a3ea7",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-03-02T21:39:11Z",
      "side": 1,
      "message": "Thanks for the clarification.\nSigurd do you think the latest description is ok? If so I will merge this.",
      "parentUuid": "87527ce3_781a8b05",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4495409f_8af61630",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-03-03T08:39:01Z",
      "side": 1,
      "message": "To determine whether a cookie applies (net:cookie_util::IsDomainMatch), one does not have to understand what a \"registrable domain\" or a TLD is, so I find mentioning those here is misleading (because a web developer might now invest time to read up on the definitions, but it won\u0027t help them with their problem).\n\nOn an intuitive level, I expect web developers to understand that a domain is a sequence of labels separated by dots, and to understand that if two sequences share a common suffix, the longer one is a subdomain of the shorter one.\n\nThe second problem I have with the current description is that it is not as actionable as it could be: It doesn\u0027t mention that the Domain\u003d attribute can be used to make the cookie apply to sub-domains. By mentioning the Domain attribute, I expect web developers to search for \"cookie domain attribute\", which has https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie as first result, and looking for \"Domain\u003d\" on that page brings the web developer to just the information they need.\n\nI\u0027ve changed the working as follows:\n\n    This cookie was blocked because neither did its domain exactly match the requests url\u0027s domain\n    nor was it configured via the \"Domain\u003d\" attribute to also apply to subdomains.\n\nLily, can you live with this for the reasons I\u0027ve given?",
      "parentUuid": "013a09e1_319a3ea7",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a847b20_d0a2e3d6",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1492,
      "author": {
        "id": 1306177
      },
      "writtenOn": "2020-03-03T16:07:56Z",
      "side": 1,
      "message": "Well my only quibble with that is it\u0027s not precisely correct. In the example above of the Domain\u003dfoo.example.com, it is in fact configured via the Domain attribute to apply to subdomains. But it still wouldn\u0027t be sent to bar.example.com.\n\nI think the first part of that sentence is fine, but it might be better to say, for the second part: nor was it configured via the Domain attribute to apply to [the request URL\u0027s domain / a set of domains including the request URL\u0027s domain / a superdomain of the request URL\u0027s domain and all subdomains thereof].",
      "parentUuid": "4495409f_8af61630",
      "range": {
        "startLine": 1492,
        "startChar": 166,
        "endLine": 1492,
        "endChar": 226
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed5d1f3f_36449897",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1498,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-02-12T08:41:01Z",
      "side": 1,
      "message": "Could we mention a sentence mirroring the top-level navigation bit, e.g. \"This cookie was blocked because it had the \"SameSite\u003dLax\" attribute and the request was made from a different site and was not initiated by a top-level navigation.\"?",
      "range": {
        "startLine": 1498,
        "startChar": 122,
        "endLine": 1498,
        "endChar": 123
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d172cbfb_72d86132",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1498,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-02-12T22:08:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed5d1f3f_36449897",
      "range": {
        "startLine": 1498,
        "startChar": 122,
        "endLine": 1498,
        "endChar": 123
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7fc35fd_f829b0f2",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1501,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-02-12T08:41:01Z",
      "side": 1,
      "message": "This cookie didn\u0027t specify a SameSite attribute when it was stored and was defaulted to \"SameSite\u003dLax\". The cookie was blocked because the request was made from a different site and was not initiated by a top-level navigation.",
      "range": {
        "startLine": 1501,
        "startChar": 111,
        "endLine": 1501,
        "endChar": 178
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f532d07f_d54c8ab5",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1501,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-02-12T22:08:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f7fc35fd_f829b0f2",
      "range": {
        "startLine": 1501,
        "startChar": 111,
        "endLine": 1501,
        "endChar": 178
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05eaa662_beaa8317",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1524,
      "author": {
        "id": 1306177
      },
      "writtenOn": "2020-02-12T14:32:40Z",
      "side": 1,
      "message": "Oh actually, sorry for missing this earlier: SameSite cookies (of all flavors) are allowed to be set by all top-level navigations (regardless of cross-siteness or safe/unsafe HTTP method).\n\nSo probably to be the most clear, we should say \"and the request was not initiated by a top-level navigation\" on all of the Set-Cookie blocked reasons for SameSite.",
      "range": {
        "startLine": 1524,
        "startChar": 119,
        "endLine": 1524,
        "endChar": 190
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1daa9144_c58f0b86",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1524,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-02-12T22:08:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "05eaa662_beaa8317",
      "range": {
        "startLine": 1524,
        "startChar": 119,
        "endLine": 1524,
        "endChar": 190
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "654b0154_5b2d5ef5",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1527,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-02-12T08:41:01Z",
      "side": 1,
      "message": "top-level navigation bit?",
      "range": {
        "startLine": 1527,
        "startChar": 114,
        "endLine": 1527,
        "endChar": 115
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81f25556_c27ed73a",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1527,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-02-12T22:08:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "654b0154_5b2d5ef5",
      "range": {
        "startLine": 1527,
        "startChar": 114,
        "endLine": 1527,
        "endChar": 115
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7a5ecea_fa2a0033",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1530,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-02-12T08:41:01Z",
      "side": 1,
      "message": "This cookie didn\u0027t specify a \"SameSite\" attribute when it was stored and was defaulted to \"SameSite\u003dLax\". The cookie was blocked because it came from a cross-site response that was not initiated by a top-level navigation.",
      "range": {
        "startLine": 1530,
        "startChar": 6,
        "endLine": 1530,
        "endChar": 158
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b483d715_a5443a73",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1530,
      "author": {
        "id": 1306177
      },
      "writtenOn": "2020-02-12T14:32:40Z",
      "side": 1,
      "message": "At this point, the cookie would not have been stored yet, so we really are still talking about Set-Cookie headers, not cookies per se.",
      "parentUuid": "b7a5ecea_fa2a0033",
      "range": {
        "startLine": 1530,
        "startChar": 6,
        "endLine": 1530,
        "endChar": 158
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab401a5f_739932e4",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1530,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2020-02-12T14:38:25Z",
      "side": 1,
      "message": "Thanks for catching that! Would\n\nThis Set-Cookie didn\u0027t specify a \"SameSite\" attribute when it was stored and was defaulted to \"SameSite\u003dLax\". The Set-Cookie was blocked because it came from a cross-site response that was not initiated by a top-level navigation.\n\nwork?",
      "parentUuid": "b483d715_a5443a73",
      "range": {
        "startLine": 1530,
        "startChar": 6,
        "endLine": 1530,
        "endChar": 158
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b9bdb36_05c6226d",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1530,
      "author": {
        "id": 1306177
      },
      "writtenOn": "2020-02-12T14:42:56Z",
      "side": 1,
      "message": "That sgtm!",
      "parentUuid": "ab401a5f_739932e4",
      "range": {
        "startLine": 1530,
        "startChar": 6,
        "endLine": 1530,
        "endChar": 158
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eeaf41d8_5913b4f4",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1530,
      "author": {
        "id": 1303398
      },
      "writtenOn": "2020-02-12T22:08:25Z",
      "side": 1,
      "message": "I added some words for the top-level logic. Look good?",
      "parentUuid": "0b9bdb36_05c6226d",
      "range": {
        "startLine": 1530,
        "startChar": 6,
        "endLine": 1530,
        "endChar": 158
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10c589b9_65c1acd5",
        "filename": "front_end/sdk/NetworkRequest.js",
        "patchSetId": 2
      },
      "lineNbr": 1530,
      "author": {
        "id": 1306177
      },
      "writtenOn": "2020-02-13T00:36:17Z",
      "side": 1,
      "message": "Lgtm, thanks!",
      "parentUuid": "eeaf41d8_5913b4f4",
      "range": {
        "startLine": 1530,
        "startChar": 6,
        "endLine": 1530,
        "endChar": 158
      },
      "revId": "ea2dab89157ace0cd3cd63bda8d0f60214aa5d85",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}