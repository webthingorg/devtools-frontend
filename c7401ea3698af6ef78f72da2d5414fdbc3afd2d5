{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "98cfc6e2_922e5602",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1466793
      },
      "writtenOn": "2020-11-18T17:29:59Z",
      "side": 1,
      "message": "Hello. This is my fist CL so please excuse any noob mistakes. this change is ready for review. Thanks in advance.",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f23392e_0dbeb1e2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1189020
      },
      "writtenOn": "2020-11-18T17:30:45Z",
      "side": 1,
      "message": "Hi Stephen,\n\nThanks so much for sending over this CL! üòä\n\nIt looks great, but please could you add a unit test for this change? You should be able to add a CSSFormatter_test.ts alongside JavaScriptFormatter_test.ts in test/unittests/front_end/formatter_worker and assert that it behaves as intended. \n\nIf you have any questions please do let me know, and thank you again.\n\nPaul",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c7014cae_17cb23cb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1189020
      },
      "writtenOn": "2020-11-18T17:35:35Z",
      "side": 1,
      "message": "Oh, you will need to add CSSFormatter_test.ts to the BUILD.gn file in the same directory. Easy to miss that one!\n\nAlso since this is your first CL you\u0027ll need to add yourself to the AUTHORS file in the root, and sign the CLA if you haven\u0027t already: https://chromium.googlesource.com/chromium/src/+/master/docs/contributing.md#legal-stuff\n\nActually, it\u0027s probably worth having a read of that document in any case, it has a lot of useful info in it.",
      "parentUuid": "9f23392e_0dbeb1e2",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9786a4b5_75b5fc86",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1466793
      },
      "writtenOn": "2020-11-18T17:52:14Z",
      "side": 1,
      "message": "Thanks for the quick response Paul! I will work to get the tests added. I\u0027ve already added myself to the authors file but i\u0027ll give the link you provided a read.",
      "parentUuid": "9f23392e_0dbeb1e2",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "243b02e8_5302093c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1466793
      },
      "writtenOn": "2020-11-29T21:13:18Z",
      "side": 1,
      "message": "Hello Paul, \n\nFollowing your guidance I added a new CSSFormatter_test.ts file to ‚Äúdevtools-frontend/test/unittests/front_end/formatter_worker/‚Äù and added this file to the sources array in BUILD.gn. The test for formatting custom CSS properties failed so I added another test with non-custom css properties to see if that would pass and that was not formatted correctly either so my assumption was that no CSS text is being formatted in the test environment.\n\nI stepped through the test code with the inspector and found that codemirror was being invoked from a different file (codemirror.js) vs production (runmode-standalone.js). Additionally as I continued to step through I saw that there was no property ‚Äútext/css‚Äù defined as a MIMEmode which is necessary for the correct tokenizer to be used for parsing CSS text. The result is the CSS string i am testing is being treated as plain text and returned as i am passing to my \"formatCSS\" test function.\n\nBelow are the unsuccessful things I tried to get the test environment to behave like production:\n\n1. I added imports for ‚Äúcm_headless.js‚Äù and ‚Äúcss.js‚Äù to my test file (cm_headless.js references runmode-standalone.js and css.js seems to be the only place where ‚Äòtext/css‚Äô is added as a MIME mode).\n2. I added these files to the deps array of the formatter_worker test build file\n3. I created a variable to store Codemirror.mimeModes prior to the test run and explicitly used this to reset mimeModes prior to setting up the tokenizer (because it appears that ‚Äútest/css‚Äù is a property which is defined prior to the test is run but at some point is removed/).\n\nI‚Äôm guessing there is something which I can configure that would result in the testing environment behaving similarly to the production environment and codemirror being configured in the same manner which would allow for CSS parsing but have not been successful in my research of the codebase. Any guidance would be greatly appreciated.\n\nThanks!",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "565c35ad_9032edd7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1466793
      },
      "writtenOn": "2020-12-03T16:25:01Z",
      "side": 1,
      "message": "Hey Paul,\n\nFriendly ping. I\u0027ve continued my research and found that the issue is not that codemirror is imported from a different file but it is imported twice when testing. First from runmode_standalone.js and then from codemirror.js.\n\nThe second import re-defines the CodeMirror object and my hypothesis is wherever the import is done there is no subsequent css.js import (to define the appropriate mimeMode for css parsing). Still not sure how this explains the difference between the test environment and the production environment.\n\nThanks in advance for any guidance!",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6adf7aaf_d492ec0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1466793
      },
      "writtenOn": "2020-12-07T17:36:28Z",
      "side": 1,
      "message": "Hey Paul,\n\nSorry i was not familiar with the attention set before so i did not add you on my previous comments. Just wanted to make sure you received.\n\nThanks again for any guidance regarding those.\n\nBest",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "da8ba1e1_9cf91138",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1189020
      },
      "writtenOn": "2020-12-09T12:51:58Z",
      "side": 1,
      "message": "Tim, I think you were just looking at this stuff?",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "76d72791_ec5c1fc2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2020-12-09T13:45:49Z",
      "side": 1,
      "message": "My apologies. I wasn\u0027t aware that somebody else was working on the corresponding bug. Your fix is exactly the same as mine, for which I had a CL sent out: https://chromium-review.googlesource.com/c/devtools/devtools-frontend/+/2578938 I have added you as co-author of that CL, including the addition to AUTHORS. Once again sorry for the confusion.",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "001ef0d2_864b2cb3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1466793
      },
      "writtenOn": "2020-12-09T15:17:26Z",
      "side": 1,
      "message": "No problem. Thanks for the co-author!\n\nNice to know we had the same fix. I was still having issues getting the unittest to run after I rebased with your other CLs and was going to follow up but i\u0027ll check out your test file and see.\n\nIs there anything left for me to do here on this CL?",
      "parentUuid": "76d72791_ec5c1fc2",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "31351a41_7060b6e3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2020-12-09T15:19:20Z",
      "side": 1,
      "message": "I think we can abandon this CL in favor of the other one. Thanks for sticking with us!",
      "parentUuid": "001ef0d2_864b2cb3",
      "revId": "c7401ea3698af6ef78f72da2d5414fdbc3afd2d5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}