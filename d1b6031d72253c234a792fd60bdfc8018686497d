{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "86d0b6a1_9c79fdbd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1429737
      },
      "writtenOn": "2021-03-15T22:31:43Z",
      "side": 1,
      "message": "PTAL.",
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e290563_a93cc5b5",
        "filename": "front_end/elements/StylePropertyTreeElement.js",
        "patchSetId": 2
      },
      "lineNbr": 261,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T09:42:35Z",
      "side": 1,
      "message": "Maybe rename this handler to _handleVarDefinitionActivate or something, since it\u0027s no longer just clicks.\nIn fact, it would be better to change the CSSVarSwatch API a bit so instead of onLinkClick it\u0027s now onLinkActivate.",
      "range": {
        "startLine": 261,
        "startChar": 2,
        "endLine": 261,
        "endChar": 27
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f01cc9c0_1a97c535",
        "filename": "front_end/elements/StylePropertyTreeElement.js",
        "patchSetId": 2
      },
      "lineNbr": 261,
      "author": {
        "id": 1429737
      },
      "writtenOn": "2021-03-16T23:53:12Z",
      "side": 1,
      "message": "sounds good.",
      "parentUuid": "0e290563_a93cc5b5",
      "range": {
        "startLine": 261,
        "startChar": 2,
        "endLine": 261,
        "endChar": 27
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b3be816_0c67ec81",
        "filename": "front_end/elements/StylePropertyTreeElement.js",
        "patchSetId": 2
      },
      "lineNbr": 261,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-17T08:40:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f01cc9c0_1a97c535",
      "range": {
        "startLine": 261,
        "startChar": 2,
        "endLine": 261,
        "endChar": 27
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ebb320e_542a591c",
        "filename": "front_end/elements/StylePropertyTreeElement.js",
        "patchSetId": 2
      },
      "lineNbr": 268,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T09:42:35Z",
      "side": 1,
      "message": "I think it\u0027d be great to do this filtering in the CSSVarSwatch component instead of here. There may ultimately be several consumers of the component, and if it lets through all click events, and all keyboard events, then that means all consumers need to have this code.",
      "range": {
        "startLine": 262,
        "startChar": 2,
        "endLine": 268,
        "endChar": 5
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "769fdc2d_6a1128df",
        "filename": "front_end/elements/StylePropertyTreeElement.js",
        "patchSetId": 2
      },
      "lineNbr": 268,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-17T08:40:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ebb320e_542a591c",
      "range": {
        "startLine": 262,
        "startChar": 2,
        "endLine": 268,
        "endChar": 5
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af8bfa8d_1bef6d83",
        "filename": "front_end/elements/StylesSidebarPane.js",
        "patchSetId": 2
      },
      "lineNbr": 1575,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T09:42:35Z",
      "side": 1,
      "message": "This might work too, but up to you, I\u0027m not 100% sure:\n\n  return this.propertiesTreeOutline._shadowRoot.activeElement;",
      "range": {
        "startLine": 1575,
        "startChar": 5,
        "endLine": 1575,
        "endChar": 119
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f23fc16b_b73abfb1",
        "filename": "front_end/elements/StylesSidebarPane.js",
        "patchSetId": 2
      },
      "lineNbr": 1575,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-17T08:40:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "af8bfa8d_1bef6d83",
      "range": {
        "startLine": 1575,
        "startChar": 5,
        "endLine": 1575,
        "endChar": 119
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37f82836_7653df8e",
        "filename": "front_end/elements/StylesSidebarPane.js",
        "patchSetId": 2
      },
      "lineNbr": 1649,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T09:42:35Z",
      "side": 1,
      "message": "What is the reasoning behind navigating vars with arrow keys?\nI\u0027m wondering because vars are similar to links, and I\u0027d sort of expect to be able to navigate through a list of links with the tab key instead (and shift-tab).\nIn fact, I\u0027d probably want to be able to do this for background urls as well, and other types of links present in CSS rules.\n\nThe other thing that comes to mind is that arrow keys are used today to navigate the list of rules (down/right goes to the next rule, up/left goes to the previous).\nWith this change, if you have 50 vars in a rule, you\u0027ll need to press right 50 times to jump to the next rule.\n\nI think we may need a different pattern here for navigation. It\u0027d almost want to do something like this:\n- arrow keys allow to go from rule to rule,\n- once on a rule, pressing enter goes \"into\" it\n- once inside a rule, tabbing goes through all focusable elements (i.e. links, including the stylesheet link)\n- pressing escape goes back to the rule list level, where arrow keys work again to go from rule to rule.\n\nThe problem is: once on a rule, pressing enter goes into edit mode, and we don\u0027t want to break this.\nSo there\u0027s an incompatibility between edit mode and navigation mode. The Styles pane tries really hard to be as close as possible to a text editor, so just starting to type works (enters text in the current rule), which doesn\u0027t work with the navigation model I described.\n\nI understand the need to navigate to variables is important, as currently there\u0027s just no way to do this, so it\u0027s inaccessible. So I don\u0027t want to hold this off on a major keyboard support refactor idea. So I\u0027m ok to +1 this (module my other comments), but I\u0027d at least ask for your change to take other kinds of links into account too (i.e. background urls, things that have the devtools-link class).",
      "range": {
        "startLine": 1646,
        "startChar": 0,
        "endLine": 1649,
        "endChar": 23
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "421255fa_ce62d506",
        "filename": "front_end/elements/StylesSidebarPane.js",
        "patchSetId": 2
      },
      "lineNbr": 1649,
      "author": {
        "id": 1429737
      },
      "writtenOn": "2021-03-16T23:53:12Z",
      "side": 1,
      "message": "The idea of using the arrows is to avoid having a lot of \"tab\" items, because if not it can be getting out of the styles panel hehehe.\n\nThe arrow up/down are still working even if you are in a var() value, I mean, if you are focused in a var() value and you click arrow up/down, you go to the next previous/next rule.\n\nI agree it would be nice to have this kind of navigation (or the one you are suggesting) in other clickable items, I\u0027ll take a look.",
      "parentUuid": "37f82836_7653df8e",
      "range": {
        "startLine": 1646,
        "startChar": 0,
        "endLine": 1649,
        "endChar": 23
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb63b870_332cdb83",
        "filename": "front_end/elements/StylesSidebarPane.js",
        "patchSetId": 2
      },
      "lineNbr": 1649,
      "author": {
        "id": 1429737
      },
      "writtenOn": "2021-03-16T23:56:28Z",
      "side": 1,
      "message": "Looks like url\u0027s was already supported for the navigation, I have just added the support for the enter key. I have tryied to add support to some other swatches, but looks like the are not accessible anyway (for example the bezierSwatch).  Let me know if you think something else should be supported.",
      "parentUuid": "421255fa_ce62d506",
      "range": {
        "startLine": 1646,
        "startChar": 0,
        "endLine": 1649,
        "endChar": 23
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d54870a_c9717806",
        "filename": "front_end/elements/StylesSidebarPane.js",
        "patchSetId": 2
      },
      "lineNbr": 1649,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-17T08:40:38Z",
      "side": 1,
      "message": "It\u0027s fine to add support for other focusable things later, not in this CL.\n\nSorry I had misread the code yesterday, I now see that only left/right goes through focusable things within the rule, and up/down still goes through the list of rules.",
      "parentUuid": "bb63b870_332cdb83",
      "range": {
        "startLine": 1646,
        "startChar": 0,
        "endLine": 1649,
        "endChar": 23
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96daa128_063888bf",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T09:42:35Z",
      "side": 1,
      "message": "Looks like you missed the closing ] character here.",
      "range": {
        "startLine": 47,
        "startChar": 45,
        "endLine": 47,
        "endChar": 59
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d613f4c1_f7668079",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1214214
      },
      "writtenOn": "2021-03-16T09:51:16Z",
      "side": 1,
      "message": "Note that this is actually fine as-is, and we could even drop the trailing `\"` as well if we wanted to:\n\n    document.querySelector(\u0027[role\u003d\"link\u0027);\n\nBut I‘m okay with adding the `\"]` if you prefer so, Patrick. It might be less surprising to read that way.",
      "parentUuid": "96daa128_063888bf",
      "range": {
        "startLine": 47,
        "startChar": 45,
        "endLine": 47,
        "endChar": 59
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b782b344_4e19e61f",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T13:16:24Z",
      "side": 1,
      "message": "I had no idea. Out of curiosity, where is this specified/documented?\nI think I\u0027d prefer to add the ] since without it it kind of looks like a typo.",
      "parentUuid": "d613f4c1_f7668079",
      "range": {
        "startLine": 47,
        "startChar": 45,
        "endLine": 47,
        "endChar": 59
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40923b0f_14de79f7",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1214214
      },
      "writtenOn": "2021-03-16T13:53:30Z",
      "side": 1,
      "message": "It’s defined here: https://drafts.csswg.org/selectors/#parse-selector but it’s not exactly obvious from the spec grammar.\n\nYou might be interested in this separated but somewhat related fun fact:\n\n    data:text/html,\u003cstyle\u003ehtml{background:hotpink\n\n(Note: no closing `}`, no closing \u003c/style\u003e)\nhttps://twitter.com/mathias/status/1257682713924034560",
      "parentUuid": "b782b344_4e19e61f",
      "range": {
        "startLine": 47,
        "startChar": 45,
        "endLine": 47,
        "endChar": 59
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe49a405_aed67066",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T14:09:58Z",
      "side": 1,
      "message": "Thanks for the reference. I actually do use this when creating small data-uri test cases, but I never thought this would apply to how selectors are parsed too. Nice to know, thank you.",
      "parentUuid": "40923b0f_14de79f7",
      "range": {
        "startLine": 47,
        "startChar": 45,
        "endLine": 47,
        "endChar": 59
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d8b3d76_adbf9823",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1429737
      },
      "writtenOn": "2021-03-16T23:53:12Z",
      "side": 1,
      "message": "Very interesting, I didn\u0027t do that on purpose hehehehe. I\u0027m adding the \u0027]\u0027 :).",
      "parentUuid": "fe49a405_aed67066",
      "range": {
        "startLine": 47,
        "startChar": 45,
        "endLine": 47,
        "endChar": 59
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49baabd7_b80da539",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-17T08:40:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0d8b3d76_adbf9823",
      "range": {
        "startLine": 47,
        "startChar": 45,
        "endLine": 47,
        "endChar": 59
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d2dbb35_482a339b",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T09:42:35Z",
      "side": 1,
      "message": "Instead of casting here, you can use the generic querySelector:\n\n  const link \u003d this.shadow.querySelector\u003cHTMLElement\u003e(\u0027[role\u003d\"link\"]\u0027);\n  if (link) {\n    link.focus();\n  }",
      "range": {
        "startLine": 50,
        "startChar": 9,
        "endLine": 50,
        "endChar": 28
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16b02edb_7f121e7c",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 1429737
      },
      "writtenOn": "2021-03-17T16:58:36Z",
      "side": 1,
      "message": "Totally agree with this change, I forgot querySelector was generic.",
      "parentUuid": "7d2dbb35_482a339b",
      "range": {
        "startLine": 50,
        "startChar": 9,
        "endLine": 50,
        "endChar": 28
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26cc7c69_5bc2d689",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-16T09:42:35Z",
      "side": 1,
      "message": "This will make it follow the link on any keydown event. We might want to restrict it to space and enter. Otherwise you\u0027ll have unwanted effects like pressing Escape to toggle the drawer will also follow the link, or pressing F12, or just holding ctrl modifier, etc.\nSo you might want to add a this.onKeyDown handler to filter out non space/enter keys.",
      "range": {
        "startLine": 100,
        "startChar": 8,
        "endLine": 100,
        "endChar": 15
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e3edc17_de83b945",
        "filename": "front_end/inline_editor/CSSVarSwatch.ts",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 1419317
      },
      "writtenOn": "2021-03-17T08:40:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "26cc7c69_5bc2d689",
      "range": {
        "startLine": 100,
        "startChar": 8,
        "endLine": 100,
        "endChar": 15
      },
      "revId": "d1b6031d72253c234a792fd60bdfc8018686497d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}