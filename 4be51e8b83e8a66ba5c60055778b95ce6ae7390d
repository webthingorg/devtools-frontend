{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "314bd693_3cb0e904",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1341633
      },
      "writtenOn": "2022-03-26T00:14:34Z",
      "side": 1,
      "message": "Publishing CL for review.  Should be working now.",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ad52823_2804ce7b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1341633
      },
      "writtenOn": "2022-03-29T20:46:48Z",
      "side": 1,
      "message": "+Mathias as an owner to review\n\nPTAL and let me know if you have any questions. Thanks!",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "058790e0_e4e5157c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1214214
      },
      "writtenOn": "2022-03-30T06:38:28Z",
      "side": 1,
      "message": "Happy to defer to Changhao for this review. Please feel free to ping me again if there are specific questions or necessary approvals.",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "027092de_1e3c02db",
        "filename": "front_end/core/sdk/CSSProperty.ts",
        "patchSetId": 7
      },
      "lineNbr": 172,
      "author": {
        "id": 1380460
      },
      "writtenOn": "2022-03-29T20:45:53Z",
      "side": 1,
      "message": "It seems like the only reason that we need CodeMirror5 is to format the style here. Can we use the formatter in https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/front_end/models/formatter/ScriptFormatter.ts;l\u003d59 to format this instead? This way we wouldn\u0027t need to depend on CodeMirror5 and wouldn\u0027t need the extra `formatStyle` function below, which is not tested and adds an extra formatting function to maintain.",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "788186b6_23a92ba7",
        "filename": "front_end/core/sdk/CSSProperty.ts",
        "patchSetId": 7
      },
      "lineNbr": 172,
      "author": {
        "id": 1341633
      },
      "writtenOn": "2022-03-29T21:11:41Z",
      "side": 1,
      "message": "To be clear, we\u0027re still using CodeMirror6 here, but we are just using a legacy CSS Parser from CodeMirror5 designed to be used by CodeMirror6.\n\nI haven\u0027t tested the formatter function you linked, but it appears to introduce a dependency cycle between core/sdk and models/formatter. I don\u0027t believe we would be able to properly use that method without reformatting the surrounding directories. Is this still something you would want to push for? If so, is there an easier way to import that method without restructuring?",
      "parentUuid": "027092de_1e3c02db",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34f32628_bdfa1ead",
        "filename": "front_end/core/sdk/CSSProperty.ts",
        "patchSetId": 7
      },
      "lineNbr": 172,
      "author": {
        "id": 1341633
      },
      "writtenOn": "2022-03-29T22:47:21Z",
      "side": 1,
      "message": "I hacked around the dependency cycle to test out the method and it doesn\u0027t work as intended. Here is the result of the formatting: https://imgur.com/1GyBFYN",
      "parentUuid": "788186b6_23a92ba7",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d9b65f7_09cc02b4",
        "filename": "front_end/core/sdk/CSSProperty.ts",
        "patchSetId": 7
      },
      "lineNbr": 172,
      "author": {
        "id": 1380460
      },
      "writtenOn": "2022-03-30T07:41:19Z",
      "side": 1,
      "message": "Do you mind uploading it so that I can take a look? I\u0027ve been using the internal formatter for the CSS changes work and it has been fine. I\u0027d hope that we only resort to another formatting function when the existing one for sure cannot work out.\n\nTo be clear, it\u0027s more about this `formatStyle` function in CSSProperty that I\u0027m concerned with. It has quite a lot of customary formatting logic and it\u0027s only used to format the style text to write back to the overridden file. I hope we can have a central place for this logic, preferrablly in the formatter.",
      "parentUuid": "34f32628_bdfa1ead",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c267275_6f93e1aa",
        "filename": "front_end/core/sdk/CSSProperty.ts",
        "patchSetId": 7
      },
      "lineNbr": 172,
      "author": {
        "id": 1341633
      },
      "writtenOn": "2022-03-30T16:35:01Z",
      "side": 1,
      "message": "Here is a CL with the test code: https://chromium-review.googlesource.com/c/devtools/devtools-frontend/+/3561381\n\nYou can find instructions on how to hit the test function in the CL.\n\nCouple of thoughts here:\n- If we still want to use `ScriptFormatter.format` for this, we would need to create a new method that will handle the newline, spacing and other symbols which will essentially be the `formatStyle` function in this CL.\n- If we somehow get `ScriptFormatter.format` working in this context, we still need to figure out how to break the dependency cycle between `model/formatter` and `core/sdk` which from what I see, will require sizable refactoring.",
      "parentUuid": "3d9b65f7_09cc02b4",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f0842f8_72b0113a",
        "filename": "front_end/core/sdk/CSSProperty.ts",
        "patchSetId": 7
      },
      "lineNbr": 172,
      "author": {
        "id": 1380460
      },
      "writtenOn": "2022-03-31T12:55:53Z",
      "side": 1,
      "message": "I see. Thanks for putting up the CL. Let me experiment with something and come back to this CL to discuss more.\n\nIf we can\u0027t really use the ScriptFormatter, then we have to rely on another custom formatting function. In that case, I\u0027d hope that we move this `formatStyle` function to somewhere more suitable, maybe in the Formatter module. But we can discuss that when we have to do this.",
      "parentUuid": "7c267275_6f93e1aa",
      "revId": "4be51e8b83e8a66ba5c60055778b95ce6ae7390d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}