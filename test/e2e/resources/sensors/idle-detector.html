<!DOCTYPE html>
<div id="is-loaded"></div>
<div id="state"></div>
<script>
  const elState = document.querySelector('#state');
  function setState(msg) {
    elState.textContent = msg;
  }
  async function main() {
    const controller = new AbortController();
    const signal = controller.signal;
    const idleDetector = new IdleDetector({
      threshold: 60000,
      signal,
    });

    document.querySelector('#is-loaded').textContent = "IdleDetector is ready";

    idleDetector.addEventListener('change', () => {
      const userState = idleDetector.userState;
      const screenState = idleDetector.screenState;
      setState(`Idle state: ${userState}, ${screenState}.`);
    });
    idleDetector.start();
  }
  main();
</script>
