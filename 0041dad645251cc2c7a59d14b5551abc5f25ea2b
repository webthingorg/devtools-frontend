{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6c4e3441_a68580a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1378407
      },
      "writtenOn": "2024-06-26T04:54:10Z",
      "side": 1,
      "message": "seems random layout tests (just ~5) are failing in CI, but not locally for me. expected?",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df033198_497463cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-26T09:20:04Z",
      "side": 1,
      "message": "mmm this is weird. Reading the failures at https://chromium-swarm.appspot.com/task?id\u003d6a6a2c02f5559710\u0026w\u003dtrue, it doesn\u0027t seem expected and it\u0027s likely something specific to this cl.\n\nwhat are the layout tests you refer to?",
      "parentUuid": "6c4e3441_a68580a2",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0784910_09b5477d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-26T09:49:47Z",
      "side": 1,
      "message": "resolving as this is discussed in another comment thread",
      "parentUuid": "df033198_497463cf",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14a52d32_8a54bd40",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1378407
      },
      "writtenOn": "2024-06-26T17:11:55Z",
      "side": 1,
      "message": "these ones btw https://ci.chromium.org/ui/p/devtools-frontend/builders/try/devtools_frontend_linux_blink_light_rel_fastbuild/17974/test-results?sortby\u003d\u0026groupby\u003d",
      "parentUuid": "f0784910_09b5477d",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d952f2ad_b14be2d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-27T09:37:09Z",
      "side": 1,
      "message": "ah I missed this. These seem to be flakes and unrelated to this CL. They have been failing in other CLs too:\n\nhttps://ci.chromium.org/ui/p/devtools-frontend/builders/try/devtools_frontend_linux_blink_light_rel_fastbuild/17998/test-results?sortby\u003d\u0026groupby\u003d",
      "parentUuid": "14a52d32_8a54bd40",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a0276eb3_980d6996",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-27T09:38:21Z",
      "side": 1,
      "message": "I meant to link https://ci.chromium.org/ui/p/devtools-frontend/builders/try/devtools_frontend_linux_blink_light_rel_fastbuild/18011/test-results?sortby\u003d\u0026groupby\u003d",
      "parentUuid": "d952f2ad_b14be2d5",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75d51c5b_1bb2249c",
        "filename": "front_end/models/trace/lantern/lantern.ts",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-26T11:57:20Z",
      "side": 1,
      "message": "after investigating with @szuend@chromium.org, we found out these imports are the culprit of the test failures. Because these entrypoints don\u0027t have an associated devtools module (no build.gn file on those folders) they don\u0027t make it to the runtime.\n\ntwo options are available:\n\n1. moving `/metrics/metrics.js` and `./simulation/simulation.js` into the parent folder (`lantern/`)\n\nor \n\n2. creating actual devtools modules for metrics/ and simulation/ (by creating the corresponding BUILD.gn files.\n\nI think 2 is likely going to cause circular dependencies and as such will be more painful to do, but I don\u0027t have a strong preferrence!",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 33,
        "endChar": 57
      },
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa1066a6_fead589b",
        "filename": "front_end/models/trace/lantern/lantern.ts",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1378407
      },
      "writtenOn": "2024-06-26T17:11:55Z",
      "side": 1,
      "message": "Huh, I thought inclusion of those two files in the lantern BUILD devtools_module would have allowed for this.\n\n100% right about 2) being tough b/c of circular dependencies (between metrics and simulation) - would have to make a third Core module I think (like Jack suggested) but the additional churn is not ideal from the perspective of consuming in Lighthouse. But I wouldn\u0027t be against a future refactor down the line.\n\nI wonder why only a handful of tests seem to fail... prior I had similar bundling issues that failed _every_ layout test, but seeing just 5 fail now made me think it must be something else. Also debugging the web test locally[1] didn\u0027t reproduce for me like it did when I forgot a `type` on an TS type export. oh well\n\n[1] npm run debug-webtest -- --target\u003dDefault http/tests/devtools/console/console-preserve-log-x-process-navigation.js",
      "parentUuid": "75d51c5b_1bb2249c",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 33,
        "endChar": 57
      },
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8eee8e9_e4452118",
        "filename": "front_end/models/trace/lantern/lantern.ts",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-27T09:31:56Z",
      "side": 1,
      "message": "it seems no tests are failing in cq now?",
      "parentUuid": "fa1066a6_fead589b",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 33,
        "endChar": 57
      },
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0144b2aa_787a0b99",
        "filename": "front_end/models/trace/lantern/lantern.ts",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1378407
      },
      "writtenOn": "2024-06-27T20:17:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b8eee8e9_e4452118",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 33,
        "endChar": 57
      },
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42262c02_3a6d1bdd",
        "filename": "front_end/models/trace/lantern/lantern.ts",
        "patchSetId": 15
      },
      "lineNbr": 47,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-26T09:20:04Z",
      "side": 1,
      "message": "bundle files in dt usually export the content of all files in the module like \n```\nimport * as FileName1 from \u0027Filename1.ts\u0027\nimport * as FileName2 from \u0027Filename2.ts\u0027\n...\n\nexport {\n  FileName1,\n  FileName2\n  ...\n}\n```\n\nI think the way we are doing it here should work with dt bundling so using this pattern is not strictly required, but the way we import stuff from this module would look a bit different. I don\u0027t feel strongly about it tho but maybe it\u0027s worth considering if the refactoring to accomodate to this is straight forward. If it is turns out being too much refactoring then feel free to ignore. (sorry for not catching this before). (same for metrics.ts)",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4820ba45_16effa69",
        "filename": "front_end/models/trace/lantern/lantern.ts",
        "patchSetId": 15
      },
      "lineNbr": 47,
      "author": {
        "id": 1378407
      },
      "writtenOn": "2024-06-26T20:30:16Z",
      "side": 1,
      "message": "I modified these module files a bit, but anything further is a lot more refactoring so I\u0027ve left it as a TODO.",
      "parentUuid": "42262c02_3a6d1bdd",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b18c385_0f908990",
        "filename": "front_end/models/trace/lantern/lantern.ts",
        "patchSetId": 15
      },
      "lineNbr": 47,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-27T09:31:56Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "4820ba45_16effa69",
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bed2251_ba00cf50",
        "filename": "front_end/models/trace/lantern/metrics/TBTUtils.ts",
        "patchSetId": 15
      },
      "lineNbr": 10,
      "author": {
        "id": 1447167
      },
      "writtenOn": "2024-06-26T09:20:04Z",
      "side": 1,
      "message": "per the previous comments, I think you meant to remove these license headers? (there are other files with these remaining too)",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 10,
        "endChar": 0
      },
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75e64b61_84720c83",
        "filename": "front_end/models/trace/lantern/metrics/TBTUtils.ts",
        "patchSetId": 15
      },
      "lineNbr": 10,
      "author": {
        "id": 1378407
      },
      "writtenOn": "2024-06-26T20:30:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4bed2251_ba00cf50",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 10,
        "endChar": 0
      },
      "revId": "0041dad645251cc2c7a59d14b5551abc5f25ea2b",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}