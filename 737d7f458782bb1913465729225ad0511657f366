{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "94298672_d166fb56",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-11-17T12:45:10Z",
      "side": 1,
      "message": "Autocompletion of object appears to be broken. See the following e2e-test: https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/test/e2e/console/console-autocomplete_test.ts;l\u003d54-56;drc\u003d95ba946d80c1de97db9160c043a08b958b985d2a\n\nIt creates an object, it types `object` and we correctly get the tooltip. Then it hits Escape to remove the tooltip and it writes a dot (e.g. it becomes `object.`). In stable, we get autocompletion for the object properties, but with this patch, no autocompletion exists.\n\nI have done the first few tweaks to the e2e-tests which appears to resolve the vast majority of the e2e-test failures: https://chromium-review.googlesource.com/c/devtools/devtools-frontend/+/3289309/1..2",
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e60f7f0a_0035159c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1520247
      },
      "writtenOn": "2021-11-17T13:27:47Z",
      "side": 1,
      "message": "Ah, indeed, it wasn\u0027t automatically re-opening completions after a dot. Uploaded a fix.",
      "parentUuid": "94298672_d166fb56",
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47c858e9_be79a069",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-11-17T13:58:27Z",
      "side": 1,
      "message": "The dots appear to be fixed, nice! The `[` key indexing however doesn\u0027t appear to be work. CodeMirror appears to immediately add a `]` behind it, resulting in `object[]`. On stable, we get the string-quoted object property autocompletions and we don\u0027t get a `]` appended. I suppose the fix will be relatively similar?",
      "parentUuid": "e60f7f0a_0035159c",
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "01629f95_2a0181cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1520247
      },
      "writtenOn": "2021-11-17T14:52:06Z",
      "side": 1,
      "message": "Oh, indeed, made it also start completing on an opening bracket. Closing such brackets, just like other brackets, seems reasonable, if the autocompletion works, even if the old editor didn\u0027t. Agree?",
      "parentUuid": "47c858e9_be79a069",
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed138c78_4b96f300",
        "filename": "front_end/panels/console/ConsolePrompt.ts",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-11-17T12:45:10Z",
      "side": 1,
      "message": "The e2e-tests are failing, as they can\u0027t find an element that has this aria-label: https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/test/e2e/helpers/console-helpers.ts;l\u003d148;drc\u003df7c7c9271940392ba3aeb5a095dced09026fb0fc I manually inspected the DOM of `\u003cdevtools-text-editor\u003e` and couldn\u0027t find it either. Are we missing this label or is it being overwritten? The editor div does have `aria-label\u003d\"Code editor\"` on it, so maybe that takes precedence? When I use that selector, the test does work as expected.",
      "range": {
        "startLine": 86,
        "startChar": 8,
        "endLine": 86,
        "endChar": 64
      },
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "453836d6_379e2491",
        "filename": "front_end/panels/console/ConsolePrompt.ts",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1520247
      },
      "writtenOn": "2021-11-17T13:27:47Z",
      "side": 1,
      "message": "Yes, that was indeed a precedence issue, but via a bug in @codemirror/view. I\u0027ve upgraded it again to include a fix. This will probably change the aria-label of some of the other editors as well, because the the same issue occurred.",
      "parentUuid": "ed138c78_4b96f300",
      "range": {
        "startLine": 86,
        "startChar": 8,
        "endLine": 86,
        "endChar": 64
      },
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed55601f_bdc56f77",
        "filename": "front_end/panels/console/ConsolePrompt.ts",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2021-11-17T13:58:27Z",
      "side": 1,
      "message": "Can confirm this has been fixed! Do you mind pulling in the changes I made in https://chromium-review.googlesource.com/c/devtools/devtools-frontend/+/3289309 in `test/e2e` to get them into this CL? Then we make sure we can get the e2e-tests running on here as well.",
      "parentUuid": "453836d6_379e2491",
      "range": {
        "startLine": 86,
        "startChar": 8,
        "endLine": 86,
        "endChar": 64
      },
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5768a76_f856f746",
        "filename": "front_end/panels/console/ConsolePrompt.ts",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 1520247
      },
      "writtenOn": "2021-11-17T14:52:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed55601f_bdc56f77",
      "range": {
        "startLine": 86,
        "startChar": 8,
        "endLine": 86,
        "endChar": 64
      },
      "revId": "737d7f458782bb1913465729225ad0511657f366",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}