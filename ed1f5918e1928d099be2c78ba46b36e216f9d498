{
  "comments": [
    {
      "key": {
        "uuid": "a40e1afe_dc5123c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1167239
      },
      "writtenOn": "2020-08-13T09:02:08Z",
      "side": 1,
      "message": "Hey Paul and Jack,\n\nI want to add a .repeat() helper to Mocha\u0027s it(). The problem I have is how to do this globally. Is there any way to \u0027intercept\u0027 mocha and add this function so that callers who import from \u0027mocha\u0027 get it straight away? Or would I have to put an intermediate module in like mocha-extensions and then have every test import from there instead?\n\nI\u0027d also like to add the it() wrapper from async-tracing as a default which I think is kind of the same problem. We have a few things like this where we want to extend/override mocha. What do you think is a good approach?",
      "revId": "ed1f5918e1928d099be2c78ba46b36e216f9d498",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14066bae_171836e2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1396442
      },
      "writtenOn": "2020-08-13T13:25:03Z",
      "side": 1,
      "message": "What\u0027s the reason for wanting to add this onto `it` rather than say, exposing a `itRepeat` helper? That means if you want to use it you just import it directly and we don\u0027t have to change any Mocha stuff.\n\nOne change I\u0027d like to make which would help here is force people to import `describe`, `it`, etc from `Mocha` explicitly rather than relying on globals, which we could do via ESLint. We could even then enforce that people import `it` from the async-tracing rather than from Mocha (like how we lint import rules in the main front_end directory).",
      "revId": "ed1f5918e1928d099be2c78ba46b36e216f9d498",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "57d836b7_67479658",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1167239
      },
      "writtenOn": "2020-08-13T14:09:58Z",
      "side": 1,
      "message": "Ergonomically it would be nice to have something you don\u0027t have to add an import for given you will just want to use this temporarily and then remove it again before you submit. e.g. it would be annoying to need to add an import for it.only().\n\nI didn\u0027t realise it was possible to rely on globals for describe, it etc. so yeah I agree that would be good to enforce imports.",
      "parentUuid": "14066bae_171836e2",
      "revId": "ed1f5918e1928d099be2c78ba46b36e216f9d498",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "752caae5_a1e97804",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1396442
      },
      "writtenOn": "2020-08-13T14:18:03Z",
      "side": 1,
      "message": "Fair point, I agree on the ergonomics üëç\n\nIf we enforce imports, we could enforce that:\n\n1. `describe`, `beforeEach`, etc, is imported from `mocha`\n2. `it` is imported from `async-tracing.js`\n3. And then we can add `it.repeats` to that, and avoid polluting mocha in anyway.\n\nWDYT?",
      "parentUuid": "57d836b7_67479658",
      "revId": "ed1f5918e1928d099be2c78ba46b36e216f9d498",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}