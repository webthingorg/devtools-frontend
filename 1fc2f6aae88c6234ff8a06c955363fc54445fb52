{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fd231476_20c593e7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1396836
      },
      "writtenOn": "2020-10-27T09:36:29Z",
      "side": 1,
      "message": "Hi Tim!\n\nI\u0027m having difficulties to use the SimpleHistoryManager from the sources bundle.\nI annotated the relevant code below; I don\u0027t really know what\u0027s going wrong here :(.\nAny suggestions would be of great help!",
      "revId": "1fc2f6aae88c6234ff8a06c955363fc54445fb52",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecfeb6fd_bbccb3e7",
        "filename": "front_end/linear_memory_inspector/LinearMemoryInspector.ts",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1396836
      },
      "writtenOn": "2020-10-27T09:36:29Z",
      "side": 1,
      "message": "Here\u0027s the import of Sources; as soon as it is used in e.g. line 21 it throws an error:\n\n```\nUncaught Error: Unable to create settings: global and local storage must be provided: Error\n      at Function.instance (front_end/common/Settings.js:76:98 \u003c- out/Default/gen/front_end/common/Settings.js:68:106)\n      at IsolatedFileSystemManager._initExcludePatterSetting (front_end/persistence/IsolatedFileSystemManager.js:305:75 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:270:79)\n      at new IsolatedFileSystemManager (front_end/persistence/IsolatedFileSystemManager.js:79:10 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:63:14)\n      at Function.instance (front_end/persistence/IsolatedFileSystemManager.js:92:43 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:74:49)\n      at front_end/snippets/ScriptSnippetFileSystem.js:259:65 \u003c- out/Default/gen/front_end/snippets/ScriptSnippetFileSystem.js:226:65\n  at front_end/common/Settings.js:76:15 \u003c- out/Default/gen/front_end/common/Settings.js:68:23\n\n  Error: Unable to create settings: global and local storage must be provided: Error\n      at Function.instance (front_end/common/Settings.js:76:98 \u003c- out/Default/gen/front_end/common/Settings.js:68:106)\n      at IsolatedFileSystemManager._initExcludePatterSetting (front_end/persistence/IsolatedFileSystemManager.js:305:75 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:270:79)\n      at new IsolatedFileSystemManager (front_end/persistence/IsolatedFileSystemManager.js:79:10 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:63:14)\n      at Function.instance (front_end/persistence/IsolatedFileSystemManager.js:92:43 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:74:49)\n      at front_end/snippets/ScriptSnippetFileSystem.js:259:65 \u003c- out/Default/gen/front_end/snippets/ScriptSnippetFileSystem.js:226:65\n      at Function.instance (front_end/common/Settings.js:76:15 \u003c- out/Default/gen/front_end/common/Settings.js:68:23)\n      at IsolatedFileSystemManager._initExcludePatterSetting (front_end/persistence/IsolatedFileSystemManager.js:305:75 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:270:79)\n      at new IsolatedFileSystemManager (front_end/persistence/IsolatedFileSystemManager.js:79:10 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:63:14)\n      at Function.instance (front_end/persistence/IsolatedFileSystemManager.js:92:43 \u003c- out/Default/gen/front_end/persistence/IsolatedFileSystemManager.js:74:49)\n      at front_end/snippets/ScriptSnippetFileSystem.js:259:65 \u003c- out/Default/gen/front_end/snippets/ScriptSnippetFileSystem.js:226:65\n```",
      "revId": "1fc2f6aae88c6234ff8a06c955363fc54445fb52",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07560a4f_ac2ae080",
        "filename": "front_end/linear_memory_inspector/LinearMemoryInspector.ts",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2020-10-27T12:22:51Z",
      "side": 1,
      "message": "The problem why this error occurs is that `snippets/` has a side-effect in ScriptSnippetFileSystem.js:259 where it instructs the file system to add a new snippetsfilesystem. E.g. `snippets/` is not self-contained and has side-effect state on load.\n\nI think this error is happening, because the import graph changes when you add this particular import. E.g. the order in which all modules are being loaded changes, which means we are currently relying on a side-effect order loading (probably in `main/`). I think that\u0027s happening in `Main.MainImpl.MainImpl._createAppUI` which creates a `Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding`.\n\nThat said, I am not sure why we have to rely on `sources/` for this component. If I understand correctly, the component should not implement business logic on its own. It should fire an event to fire the navigation event and the user of `linear-memory-inspector` would then implement the functionality. I don\u0027t see a reference to a user of this component yet, is it unused right now?\n\nWould it be possible to refactor this component such that it does not rely on the business logic, but instead let the user of the component handle the navigation history? My assumption is that `sources/` itself will use this component. This would hopefully remove the circular dependency between `sources/` and this component and hopefully resolve the side-effect loading issue that we are currently relying on with `MainImpl`.\n\nIt might also be good to file a CRBug to explain that we are currently relying on `MainImpl` ordering and that `snippets/` performs side-effect tasks upon module loading. `snippets/` should not perform such actions on loading, which would prevent these kind of issues as well.\n\nLet me know if that was useful. If not, feel free to set up a VC and we can pair debug the issue.",
      "parentUuid": "ecfeb6fd_bbccb3e7",
      "revId": "1fc2f6aae88c6234ff8a06c955363fc54445fb52",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}