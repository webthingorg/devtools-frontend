import{b as e}from"./storybook-prebuilt-7b9e8f8a.js";import{d as t}from"./storybook-prebuilt-0105af35.js";var n;function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function s(){var r,i,a=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=o.transport,v=o.async,l=void 0!==v&&v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.isAsync=void 0,this.sender=Math.random().toString(16).slice(2),this.events={},this.data={},this.transport=void 0,this.addPeerListener=e((function(e,t){a.addListener(e,t)}),t(n||(r=["\n      channel.addPeerListener is deprecated\n    "],i||(i=r.slice(0)),n=Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(i)}}))))),this.isAsync=l,u&&(this.transport=u,this.transport.setHandler((function(e){return a.handleEvent(e)})))}var i,a,o;return i=s,a=[{key:"hasTransport",get:function(){return!!this.transport}},{key:"addListener",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var i={type:e,args:r,from:this.sender},a={};r.length>=1&&r[0]&&r[0].options&&(a=r[0].options);var o=function(){t.transport&&t.transport.send(i,a),t.handleEvent(i)};this.isAsync?setImmediate(o):o()}},{key:"last",value:function(e){return this.data[e]}},{key:"eventNames",value:function(){return Object.keys(this.events)}},{key:"listenerCount",value:function(e){var t=this.listeners(e);return t?t.length:0}},{key:"listeners",value:function(e){var t=this.events[e];return t||void 0}},{key:"once",value:function(e,t){var n=this.onceListener(e,t);this.addListener(e,n)}},{key:"removeAllListeners",value:function(e){e?this.events[e]&&delete this.events[e]:this.events={}}},{key:"removeListener",value:function(e,t){var n=this.listeners(e);n&&(this.events[e]=n.filter((function(e){return e!==t})))}},{key:"on",value:function(e,t){this.addListener(e,t)}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"handleEvent",value:function(e){var t=this.listeners(e.type);t&&t.length&&t.forEach((function(t){t.apply(e,e.args)})),this.data[e.type]=e.args}},{key:"onceListener",value:function(e,t){var n=this,r=function r(){return n.removeListener(e,r),t.apply(void 0,arguments)};return r}}],a&&r(i.prototype,a),o&&r(i,o),s}(),i=s,a=Object.freeze({__proto__:null,Channel:s,default:i});export{i as C,s as a,a as e};
//# sourceMappingURL=storybook-prebuilt-aa82011f.js.map
