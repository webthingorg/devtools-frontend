{
  "comments": [
    {
      "key": {
        "uuid": "757c4674_2206bd95",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1334873
      },
      "writtenOn": "2020-07-30T05:40:29Z",
      "side": 1,
      "message": "Friendly ping.",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2671e0a0_79da3293",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1323977
      },
      "writtenOn": "2020-07-30T06:04:53Z",
      "side": 1,
      "message": "The overall structure and how i18n is integrated in to the module system looks good to me.\n\nI defer to Paul how the individual locale files should be bundled and in which gni/gn file to put that logic, so please wait for Pauls (or Tims) +1 as well :)\n\nThanks for slogging through here! Wrangling the build system can be frustrating at the moment, but this will be better in the future!",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c591c0c8_4e546222",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1334873
      },
      "writtenOn": "2020-08-07T17:08:41Z",
      "side": 1,
      "message": "Hi everyone,\n\nJust a friendly ping, @aerotwist is there anything holding the review of this CL?",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b94e66c7_50979b85",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1334873
      },
      "writtenOn": "2020-08-07T17:08:41Z",
      "side": 1,
      "message": "thanks for the review Simon. I\u0027ll hold the change until I have a +1 from Tim or Paul",
      "parentUuid": "2671e0a0_79da3293",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90002efb_0bea35af",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1189020
      },
      "writtenOn": "2020-08-14T08:36:36Z",
      "side": 1,
      "message": "Hey, so I think mostly this implementation LGTM. What I\u0027m less comfortable with is the build-time dependency on transpiling via Rollup, which is inconsistent with the rest of our infrastructure. With any other third party dep we check in the compiled/transpiled assets and don\u0027t change them at build (in fact we copy them via devtools_pre_built over to gen or resources/inspector). \nI think we should remove the Rollup pass that converts from CJS to import statements, and have that as part of rolling the dependency in.",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0c2dc755_3ca7cb96",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1334873
      },
      "writtenOn": "2020-08-19T19:02:52Z",
      "side": 1,
      "message": "Hi Paul,\n\nI\u0027m not sure I understand the ask, could you elaborate more? If it helps:\nI based most of the work on these guides:\n\nTypescriptified modules (e.g. TypeScript + Closure Compiler)\nsrc/scripts/build/ninja/README.md\n\ndevtools_pre_built seems to be suggested for \"Closure Compiler only\"\n\nFor:\naction(\"bundle_i18n\")\n\nthe code is already checked in, I\u0027m just moving it to a place where (IMO) makes more sense as it is part of the third_party/i18n library.",
      "parentUuid": "90002efb_0bea35af",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b6252733_78c10d40",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1334873
      },
      "writtenOn": "2020-08-19T19:02:52Z",
      "side": 1,
      "message": "Hi Paul and Tim,\n\n@tvanderlippe As Paul seems to be on vacation could you resume reviewing this CL?",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0966ba2a_b2129dd8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2020-08-20T11:24:31Z",
      "side": 1,
      "message": "I think the confusion/disagreement largely stems from the fact that the bundle-as-downloaded is not usable for DevTools. E.g. we need to perform (subjectively invasive) transformations to make it consumable for DevTools.\n\nIn other projects (like the Acorn extensions), we have upstreamed ES modules compatible distributions (based on Rollup). We then wait for upstream to land these changes and then we consume it from NPM as normal.\n\nAt this point, I think we have 2 options:\n1. Create an ES modules distribution upstream so that our consumption here in DevTools is as easy as all other dependencies (this is what Paul was getting at I think)\n2. Keep the current transformation for now and perform step 1 later.\n\nI would personally be okay with choosing option 2, to prevent this CL from dragging on much longer. However, we should work with upstream to create an ES modules bundle. But, I remember that there was some disagreement in upstream about that? (I kinda lost track of these discussions)",
      "parentUuid": "0c2dc755_3ca7cb96",
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f9d3374_c38319f7",
        "filename": "front_end/i18n/i18n-lh-bundle.js",
        "patchSetId": 11
      },
      "lineNbr": 8,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2020-08-20T11:24:31Z",
      "side": 1,
      "message": "I think what Paul was getting at is that`i18n-lh-bundle.js` isn\u0027t necessary per se. You can move this import into `i18nImpl.js` and it should still work. Can you try that out?",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 8,
        "endChar": 41
      },
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80389815_cdfe8f1e",
        "filename": "front_end/i18n/i18n.js",
        "patchSetId": 11
      },
      "lineNbr": 4,
      "author": {
        "id": 1189020
      },
      "writtenOn": "2020-08-14T08:36:36Z",
      "side": 1,
      "message": "I\u0027m a little confused as to the indirection here. There\u0027s this import that goes to impl, but then impl goes to i18n-lh-bundle, which then goes to third_party/i18n/i18n-bundle. Can we simplify that at all?",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 38
      },
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "daf7b517_cd78159d",
        "filename": "front_end/i18n/i18n.js",
        "patchSetId": 11
      },
      "lineNbr": 4,
      "author": {
        "id": 1334873
      },
      "writtenOn": "2020-08-19T19:02:52Z",
      "side": 1,
      "message": "for front_end/i18n/i18n.js\nI got this on some previous feedback from Simon:\n\"I\u0027d prefer to stick with the convention and let the \u003cmodule name\u003e/\u003cmodule name\u003e.js be only a thin file that re-exports all things from a module.\"\n\nfor front_end/i18n/i18nImpl.js:\nAlthough we consume most of Lighthouse i18n \"as is\", we also require some customizations for Devtools, this module implements these customizations. It also re-export the functions from the bundle (i18n-bundle) that we just consume with no modifications.\n\nI\u0027m sorry that most of the context on this work got lost when the original CL was deleted (deleted linked CLs resulted in the base being deleted too), but fortunately I have it on my email and I\u0027ll be happy to provide it as needed.",
      "parentUuid": "80389815_cdfe8f1e",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 38
      },
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "34fedf06_ba6134fc",
        "filename": "front_end/i18n/i18n.js",
        "patchSetId": 11
      },
      "lineNbr": 4,
      "author": {
        "id": 1118373
      },
      "writtenOn": "2020-08-19T19:31:55Z",
      "side": 1,
      "message": "Btw: Paul is now on vacation and Tim is back.\n\nMaybe Tim can take a look, but there is probably going to be some missed context/continuation.",
      "parentUuid": "daf7b517_cd78159d",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 38
      },
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e2a0282_54562511",
        "filename": "front_end/i18n/i18n.js",
        "patchSetId": 11
      },
      "lineNbr": 4,
      "author": {
        "id": 1365394
      },
      "writtenOn": "2020-08-20T11:24:31Z",
      "side": 1,
      "message": "I replied on the `i18n-lh-bundle.js` file",
      "parentUuid": "34fedf06_ba6134fc",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 38
      },
      "revId": "ec32a34f665f929f29c368415b7058838b86d0a2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}